{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nvar _index = require('../store/index');\nvar _error_screen = require('../core/error_screen');\nvar _error_screen2 = _interopRequireDefault(_error_screen);\nvar _loading_screen = require('../core/loading_screen');\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\nvar _social_or_email_login_screen = require('./passwordless/social_or_email_login_screen');\nvar _social_or_email_login_screen2 = _interopRequireDefault(_social_or_email_login_screen);\nvar _social_or_phone_number_login_screen = require('./passwordless/social_or_phone_number_login_screen');\nvar _social_or_phone_number_login_screen2 = _interopRequireDefault(_social_or_phone_number_login_screen);\nvar _ask_vcode = require('../connection/passwordless/ask_vcode');\nvar _ask_vcode2 = _interopRequireDefault(_ask_vcode);\nvar _last_login_screen = require('../core/sso/last_login_screen');\nvar _last_login_screen2 = _interopRequireDefault(_last_login_screen);\nvar _index2 = require('../connection/passwordless/index');\nvar _sync = require('../sync');\nvar _index3 = require('../core/index');\nvar l = _interopRequireWildcard(_index3);\nvar _quick_auth = require('../quick_auth');\nvar _index4 = require('../core/sso/index');\nvar sso = _interopRequireWildcard(_index4);\nvar _email = require('../field/email');\nvar _phone_number = require('../field/phone_number');\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar setPrefill = function setPrefill(m) {\n  var _l$prefill$toJS = l.prefill(m).toJS(),\n    email = _l$prefill$toJS.email,\n    phoneNumber = _l$prefill$toJS.phoneNumber;\n  if (typeof email === 'string') {\n    m = (0, _email.setEmail)(m, email);\n  }\n  if (typeof phoneNumber === 'string') {\n    m = (0, _phone_number.setPhoneNumber)(m, phoneNumber);\n  }\n  return m;\n};\nvar Passwordless = function () {\n  function Passwordless() {\n    _classCallCheck(this, Passwordless);\n  }\n  Passwordless.prototype.didInitialize = function didInitialize(m, opts) {\n    m = (0, _index2.initPasswordless)(m, opts);\n    return m;\n  };\n  Passwordless.prototype.didReceiveClientSettings = function didReceiveClientSettings(m) {\n    var anySocialConnection = l.hasSomeConnections(m, 'social');\n    var anyPasswordlessConnection = l.hasSomeConnections(m, 'passwordless');\n    if (!anySocialConnection && !anyPasswordlessConnection) {\n      var error = new Error('At least one email, sms or social connection needs to be available.');\n      error.code = 'no_connection';\n      m = l.stop(m, error);\n    }\n    m = setPrefill(m);\n    return m;\n  };\n  Passwordless.prototype.render = function render(m) {\n    //if there's an error, we should show the error screen no matter what.\n    if (l.hasStopped(m)) {\n      return new _error_screen2.default();\n    }\n\n    // TODO: remove the detail about the loading pane being pinned,\n    // sticky screens should be handled at the box module.\n    if (!(0, _sync.isDone)(m) || m.get('isLoadingPanePinned')) {\n      return new _loading_screen2.default();\n    }\n    if (!(0, _quick_auth.hasSkippedQuickAuth)(m)) {\n      if (l.ui.rememberLastLogin(m)) {\n        var lastUsedConnection = sso.lastUsedConnection(m);\n        var lastUsedUsername = sso.lastUsedUsername(m);\n        if (lastUsedConnection && (0, _sync.isSuccess)(m, 'sso') && l.hasConnection(m, lastUsedConnection.get('name')) && ['passwordless', 'social'].indexOf(l.findConnection(m, lastUsedConnection.get('name')).get('type')) >= 0 //if connection.type is either passwordless or social\n        ) {\n          var conn = l.findConnection(m, lastUsedConnection.get('name'));\n          var connectionType = conn.get('type');\n          if (connectionType === 'passwordless' || connectionType === 'social') {\n            return new _last_login_screen2.default();\n          }\n        }\n      }\n    }\n    if ((0, _index2.isEmail)(m)) {\n      return (0, _index2.isSendLink)(m) || !(0, _index2.passwordlessStarted)(m) ? new _social_or_email_login_screen2.default() : new _ask_vcode2.default();\n    } else {\n      return (0, _index2.passwordlessStarted)(m) ? new _ask_vcode2.default() : new _social_or_phone_number_login_screen2.default();\n    }\n  };\n  return Passwordless;\n}();\nexports.default = new Passwordless();","map":{"version":3,"names":["exports","__esModule","_index","require","_error_screen","_error_screen2","_interopRequireDefault","_loading_screen","_loading_screen2","_social_or_email_login_screen","_social_or_email_login_screen2","_social_or_phone_number_login_screen","_social_or_phone_number_login_screen2","_ask_vcode","_ask_vcode2","_last_login_screen","_last_login_screen2","_index2","_sync","_index3","l","_interopRequireWildcard","_quick_auth","_index4","sso","_email","_phone_number","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","_classCallCheck","instance","Constructor","TypeError","setPrefill","m","_l$prefill$toJS","prefill","toJS","email","phoneNumber","setEmail","setPhoneNumber","Passwordless","didInitialize","opts","initPasswordless","didReceiveClientSettings","anySocialConnection","hasSomeConnections","anyPasswordlessConnection","error","Error","code","stop","render","hasStopped","isDone","get","hasSkippedQuickAuth","ui","rememberLastLogin","lastUsedConnection","lastUsedUsername","isSuccess","hasConnection","indexOf","findConnection","conn","connectionType","isEmail","isSendLink","passwordlessStarted"],"sources":["C:/Users/diskk/OneDrive/Desktop/New folder/Transport_modal/node_modules/auth0-lock/lib/engine/passwordless.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _index = require('../store/index');\n\nvar _error_screen = require('../core/error_screen');\n\nvar _error_screen2 = _interopRequireDefault(_error_screen);\n\nvar _loading_screen = require('../core/loading_screen');\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nvar _social_or_email_login_screen = require('./passwordless/social_or_email_login_screen');\n\nvar _social_or_email_login_screen2 = _interopRequireDefault(_social_or_email_login_screen);\n\nvar _social_or_phone_number_login_screen = require('./passwordless/social_or_phone_number_login_screen');\n\nvar _social_or_phone_number_login_screen2 = _interopRequireDefault(_social_or_phone_number_login_screen);\n\nvar _ask_vcode = require('../connection/passwordless/ask_vcode');\n\nvar _ask_vcode2 = _interopRequireDefault(_ask_vcode);\n\nvar _last_login_screen = require('../core/sso/last_login_screen');\n\nvar _last_login_screen2 = _interopRequireDefault(_last_login_screen);\n\nvar _index2 = require('../connection/passwordless/index');\n\nvar _sync = require('../sync');\n\nvar _index3 = require('../core/index');\n\nvar l = _interopRequireWildcard(_index3);\n\nvar _quick_auth = require('../quick_auth');\n\nvar _index4 = require('../core/sso/index');\n\nvar sso = _interopRequireWildcard(_index4);\n\nvar _email = require('../field/email');\n\nvar _phone_number = require('../field/phone_number');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar setPrefill = function setPrefill(m) {\n  var _l$prefill$toJS = l.prefill(m).toJS(),\n      email = _l$prefill$toJS.email,\n      phoneNumber = _l$prefill$toJS.phoneNumber;\n\n  if (typeof email === 'string') {\n    m = (0, _email.setEmail)(m, email);\n  }\n  if (typeof phoneNumber === 'string') {\n    m = (0, _phone_number.setPhoneNumber)(m, phoneNumber);\n  }\n  return m;\n};\n\nvar Passwordless = function () {\n  function Passwordless() {\n    _classCallCheck(this, Passwordless);\n  }\n\n  Passwordless.prototype.didInitialize = function didInitialize(m, opts) {\n    m = (0, _index2.initPasswordless)(m, opts);\n\n    return m;\n  };\n\n  Passwordless.prototype.didReceiveClientSettings = function didReceiveClientSettings(m) {\n    var anySocialConnection = l.hasSomeConnections(m, 'social');\n    var anyPasswordlessConnection = l.hasSomeConnections(m, 'passwordless');\n\n    if (!anySocialConnection && !anyPasswordlessConnection) {\n      var error = new Error('At least one email, sms or social connection needs to be available.');\n      error.code = 'no_connection';\n      m = l.stop(m, error);\n    }\n    m = setPrefill(m);\n\n    return m;\n  };\n\n  Passwordless.prototype.render = function render(m) {\n    //if there's an error, we should show the error screen no matter what.\n    if (l.hasStopped(m)) {\n      return new _error_screen2.default();\n    }\n\n    // TODO: remove the detail about the loading pane being pinned,\n    // sticky screens should be handled at the box module.\n    if (!(0, _sync.isDone)(m) || m.get('isLoadingPanePinned')) {\n      return new _loading_screen2.default();\n    }\n\n    if (!(0, _quick_auth.hasSkippedQuickAuth)(m)) {\n      if (l.ui.rememberLastLogin(m)) {\n        var lastUsedConnection = sso.lastUsedConnection(m);\n        var lastUsedUsername = sso.lastUsedUsername(m);\n        if (lastUsedConnection && (0, _sync.isSuccess)(m, 'sso') && l.hasConnection(m, lastUsedConnection.get('name')) && ['passwordless', 'social'].indexOf(l.findConnection(m, lastUsedConnection.get('name')).get('type')) >= 0 //if connection.type is either passwordless or social\n        ) {\n            var conn = l.findConnection(m, lastUsedConnection.get('name'));\n            var connectionType = conn.get('type');\n            if (connectionType === 'passwordless' || connectionType === 'social') {\n              return new _last_login_screen2.default();\n            }\n          }\n      }\n    }\n\n    if ((0, _index2.isEmail)(m)) {\n      return (0, _index2.isSendLink)(m) || !(0, _index2.passwordlessStarted)(m) ? new _social_or_email_login_screen2.default() : new _ask_vcode2.default();\n    } else {\n      return (0, _index2.passwordlessStarted)(m) ? new _ask_vcode2.default() : new _social_or_phone_number_login_screen2.default();\n    }\n  };\n\n  return Passwordless;\n}();\n\nexports.default = new Passwordless();\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}