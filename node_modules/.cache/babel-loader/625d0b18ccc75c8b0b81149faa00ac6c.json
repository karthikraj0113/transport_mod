{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.debouncedRequestAvatar = undefined;\nexports.requestAvatar = requestAvatar;\nvar _index = require('./store/index');\nvar _data_utils = require('./utils/data_utils');\nvar _preload_utils = require('./utils/preload_utils');\nvar preload = _interopRequireWildcard(_preload_utils);\nvar _fn_utils = require('./utils/fn_utils');\nvar f = _interopRequireWildcard(_fn_utils);\nvar _index2 = require('./core/index');\nvar l = _interopRequireWildcard(_index2);\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nvar _dataFns = (0, _data_utils.dataFns)(['avatar']),\n  tget = _dataFns.tget,\n  tset = _dataFns.tset;\nvar cache = {};\nfunction requestAvatar(id, src) {\n  if (cache[src]) {\n    return update(id, src, cache[src].url, cache[src].displayName, true);\n  }\n  var provider = l.ui.avatarProvider((0, _index.read)(_index.getEntity, 'lock', id)).toJS();\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    m = tset(m, 'syncStatus', 'loading');\n    m = tset(m, 'src', src);\n    return m;\n  });\n  var url = void 0,\n    displayName = void 0;\n  provider.url(src, function (error, str) {\n    if (error) return handleError(id, src);\n    preload.img(str, function (error, img) {\n      if (error) return handleError(id, src);\n      url = img.src;\n      if (displayName !== undefined) handleSuccess(id, src, url, displayName);\n    });\n  });\n  provider.displayName(src, function (error, str) {\n    if (error) return handleError(id);\n    displayName = str;\n    if (url !== undefined) handleSuccess(id, src, url, displayName);\n  });\n}\nvar debouncedRequestAvatar = exports.debouncedRequestAvatar = f.debounce(requestAvatar, 300);\nfunction handleSuccess(id, src, url, displayName) {\n  cache[src] = {\n    url: url,\n    displayName: displayName\n  };\n  update(id, src, url, displayName);\n}\nfunction update(id, src, url, displayName) {\n  var force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    if (force || tget(m, 'src') === src) {\n      m = tset(m, 'syncStatus', 'ok');\n      m = tset(m, 'url', url);\n      m = tset(m, 'src', src);\n      m = tset(m, 'displayName', displayName);\n    }\n    return m;\n  });\n}\nfunction handleError(id, src) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    return tget(m, 'src') === 'src' ? tset(m, 'syncStatus', 'error') : m;\n  });\n}","map":{"version":3,"names":["exports","__esModule","debouncedRequestAvatar","undefined","requestAvatar","_index","require","_data_utils","_preload_utils","preload","_interopRequireWildcard","_fn_utils","f","_index2","l","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","_dataFns","dataFns","tget","tset","cache","id","src","update","url","displayName","provider","ui","avatarProvider","read","getEntity","toJS","swap","updateEntity","m","error","str","handleError","img","handleSuccess","debounce","force","arguments","length"],"sources":["C:/Users/diskk/OneDrive/Desktop/New folder/Transport_modal/node_modules/auth0-lock/lib/avatar.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.debouncedRequestAvatar = undefined;\nexports.requestAvatar = requestAvatar;\n\nvar _index = require('./store/index');\n\nvar _data_utils = require('./utils/data_utils');\n\nvar _preload_utils = require('./utils/preload_utils');\n\nvar preload = _interopRequireWildcard(_preload_utils);\n\nvar _fn_utils = require('./utils/fn_utils');\n\nvar f = _interopRequireWildcard(_fn_utils);\n\nvar _index2 = require('./core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar _dataFns = (0, _data_utils.dataFns)(['avatar']),\n    tget = _dataFns.tget,\n    tset = _dataFns.tset;\n\nvar cache = {};\n\nfunction requestAvatar(id, src) {\n  if (cache[src]) {\n    return update(id, src, cache[src].url, cache[src].displayName, true);\n  }\n\n  var provider = l.ui.avatarProvider((0, _index.read)(_index.getEntity, 'lock', id)).toJS();\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    m = tset(m, 'syncStatus', 'loading');\n    m = tset(m, 'src', src);\n    return m;\n  });\n\n  var url = void 0,\n      displayName = void 0;\n\n  provider.url(src, function (error, str) {\n    if (error) return handleError(id, src);\n\n    preload.img(str, function (error, img) {\n      if (error) return handleError(id, src);\n      url = img.src;\n      if (displayName !== undefined) handleSuccess(id, src, url, displayName);\n    });\n  });\n\n  provider.displayName(src, function (error, str) {\n    if (error) return handleError(id);\n    displayName = str;\n    if (url !== undefined) handleSuccess(id, src, url, displayName);\n  });\n}\n\nvar debouncedRequestAvatar = exports.debouncedRequestAvatar = f.debounce(requestAvatar, 300);\n\nfunction handleSuccess(id, src, url, displayName) {\n  cache[src] = { url: url, displayName: displayName };\n  update(id, src, url, displayName);\n}\n\nfunction update(id, src, url, displayName) {\n  var force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    if (force || tget(m, 'src') === src) {\n      m = tset(m, 'syncStatus', 'ok');\n      m = tset(m, 'url', url);\n      m = tset(m, 'src', src);\n      m = tset(m, 'displayName', displayName);\n    }\n    return m;\n  });\n}\n\nfunction handleError(id, src) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    return tget(m, 'src') === 'src' ? tset(m, 'syncStatus', 'error') : m;\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}