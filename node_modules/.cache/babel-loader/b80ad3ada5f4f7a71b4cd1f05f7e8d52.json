{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.logIn = logIn;\nexports.signUp = signUp;\nexports.signUpError = signUpError;\nexports.resetPassword = resetPassword;\nexports.showLoginActivity = showLoginActivity;\nexports.showSignUpActivity = showSignUpActivity;\nexports.showResetPasswordActivity = showResetPasswordActivity;\nexports.cancelResetPassword = cancelResetPassword;\nexports.cancelMFALogin = cancelMFALogin;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.showLoginMFAActivity = showLoginMFAActivity;\nvar _index = require('../../store/index');\nvar _web_api = require('../../core/web_api');\nvar _web_api2 = _interopRequireDefault(_web_api);\nvar _actions = require('../../core/actions');\nvar _index2 = require('../../core/index');\nvar l = _interopRequireWildcard(_index2);\nvar _index3 = require('../../field/index');\nvar c = _interopRequireWildcard(_index3);\nvar _dompurify = require('dompurify');\nvar _index4 = require('./index');\nvar _i18n = require('../../i18n');\nvar i18n = _interopRequireWildcard(_i18n);\nvar _captcha = require('../captcha');\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction logIn(id) {\n  var needsMFA = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var usernameField = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  var username = c.getFieldValue(m, usernameField);\n  var params = {\n    connection: (0, _index4.databaseConnectionName)(m),\n    username: username,\n    password: c.getFieldValue(m, 'password')\n  };\n  var fields = [usernameField, 'password'];\n  var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, false, fields);\n  if (!isCaptchaValid) {\n    return (0, _captcha.showMissingCaptcha)(m, id);\n  }\n  var mfaCode = c.getFieldValue(m, 'mfa_code');\n  if (needsMFA) {\n    params['mfa_code'] = mfaCode;\n    fields.push('mfa_code');\n  }\n  (0, _actions.logIn)(id, fields, params, function (id, error, fields, next) {\n    if (error.error === 'a0.mfa_required') {\n      return showLoginMFAActivity(id);\n    }\n    if (error) {\n      var wasInvalid = error && error.code === 'invalid_captcha';\n      return (0, _captcha.swapCaptcha)(id, false, wasInvalid, next);\n    }\n    next();\n  });\n}\nfunction generateRandomUsername(length) {\n  var result = '';\n  var characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nfunction signUp(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var fields = ['email', 'password'];\n\n  // Skip the username validation if signUpHideUsernameField option is enabled.\n  // We will generate a random username to avoid name collusion before we make the signup API call.\n  if ((0, _index4.databaseConnectionRequiresUsername)(m) && !(0, _index4.signUpHideUsernameField)(m)) fields.push('username');\n  (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n    return fields.push(x.get('name'));\n  });\n  (0, _actions.validateAndSubmit)(id, fields, function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email'),\n      password: c.getFieldValue(m, 'password'),\n      autoLogin: (0, _index4.shouldAutoLogin)(m)\n    };\n    var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, false, fields);\n    if (!isCaptchaValid) {\n      return (0, _captcha.showMissingCaptcha)(m, id);\n    }\n    if ((0, _index4.databaseConnectionRequiresUsername)(m)) {\n      if ((0, _index4.signUpHideUsernameField)(m)) {\n        var usernameValidation = (0, _index4.databaseConnection)(m).getIn(['validation', 'username']);\n        var range = usernameValidation ? usernameValidation.toJS() : {\n          max: 15\n        };\n        params.username = generateRandomUsername(range.max);\n      } else {\n        params.username = c.getFieldValue(m, 'username');\n      }\n    }\n    if (!(0, _index4.additionalSignUpFields)(m).isEmpty()) {\n      params.user_metadata = {};\n      (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n        var storage = x.get('storage');\n        var fieldName = x.get('name');\n        var fieldValue = (0, _dompurify.sanitize)(c.getFieldValue(m, x.get('name')), {\n          ALLOWED_TAGS: []\n        });\n        switch (storage) {\n          case 'root':\n            params[fieldName] = fieldValue;\n            break;\n          default:\n            if (!params.user_metadata) {\n              params.user_metadata = {};\n            }\n            params.user_metadata[fieldName] = fieldValue;\n            break;\n        }\n      });\n    }\n    var errorHandler = function errorHandler(error, popupHandler) {\n      if (!!popupHandler) {\n        popupHandler._current_popup.kill();\n      }\n      var wasInvalidCaptcha = error && error.code === 'invalid_captcha';\n      (0, _captcha.swapCaptcha)(id, false, wasInvalidCaptcha, function () {\n        setTimeout(function () {\n          return signUpError(id, error);\n        }, 250);\n      });\n    };\n    try {\n      // For now, always pass 'null' for the context as we don't need it yet.\n      // If we need it later, it'll save a breaking change in hooks already in use.\n      var context = null;\n      l.runHook(m, 'signingUp', context, function () {\n        _web_api2.default.signUp(id, params, function (error, result, popupHandler) {\n          for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            args[_key - 3] = arguments[_key];\n          }\n          if (error) {\n            errorHandler(error, popupHandler);\n          } else {\n            signUpSuccess.apply(undefined, [id, result, popupHandler].concat(args));\n          }\n        });\n      });\n    } catch (e) {\n      errorHandler(e);\n    }\n  });\n}\nfunction signUpSuccess(id, result, popupHandler) {\n  var lock = (0, _index.read)(_index.getEntity, 'lock', id);\n  l.emitEvent(lock, 'signup success', result);\n  if ((0, _index4.shouldAutoLogin)(lock)) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return m.set('signedUp', true);\n    });\n\n    // TODO: check options, redirect is missing\n    var options = {\n      connection: (0, _index4.databaseConnectionName)(lock),\n      username: c.email(lock),\n      password: c.password(lock)\n    };\n    if (!!popupHandler) {\n      options.popupHandler = popupHandler;\n    }\n    return _web_api2.default.logIn(id, options, l.auth.params(lock).toJS(), function (error) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      if (error) {\n        setTimeout(function () {\n          return autoLogInError(id, error);\n        }, 250);\n      } else {\n        _actions.logInSuccess.apply(undefined, [id].concat(args));\n      }\n    });\n  }\n  var autoclose = l.ui.autoclose(lock);\n  if (!autoclose) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (lock) {\n      return l.setSubmitting(lock, false).set('signedUp', true);\n    });\n  } else {\n    (0, _actions.closeLock)(id, false);\n  }\n}\nfunction signUpError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var invalidPasswordKeys = {\n    PasswordDictionaryError: 'password_dictionary_error',\n    PasswordNoUserInfoError: 'password_no_user_info_error',\n    PasswordStrengthError: 'password_strength_error'\n  };\n  l.emitEvent(m, 'signup error', error);\n  var errorKey = error.code === 'invalid_password' && invalidPasswordKeys[error.name] || error.code;\n  var errorMessage = i18n.html(m, ['error', 'signUp', errorKey]) || i18n.html(m, ['error', 'signUp', 'lock.fallback']);\n  if (error.code === 'hook_error') {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, error.description || errorMessage);\n    return;\n  }\n  if (errorKey === 'invalid_captcha') {\n    errorMessage = i18n.html(m, ['error', 'login', errorKey]);\n    return (0, _captcha.swapCaptcha)(id, false, true, function () {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n    });\n  }\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\nfunction autoLogInError(id, error) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    var errorMessage = l.loginErrorMessage(m, error);\n    if ((0, _index4.hasScreen)(m, 'login')) {\n      return l.setSubmitting((0, _index4.setScreen)(m, 'login'), false, errorMessage);\n    } else {\n      return l.setSubmitting(m, false, errorMessage);\n    }\n  });\n}\nfunction resetPassword(id) {\n  (0, _actions.validateAndSubmit)(id, ['email'], function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email')\n    };\n    _web_api2.default.resetPassword(id, params, function (error) {\n      if (error) {\n        setTimeout(function () {\n          return resetPasswordError(id, error);\n        }, 250);\n      } else {\n        resetPasswordSuccess(id);\n      }\n    });\n  });\n}\nfunction resetPasswordSuccess(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  if ((0, _index4.hasScreen)(m, 'login')) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return (0, _index4.setScreen)(l.setSubmitting(m, false), 'login', ['']);\n    } // array with one empty string tells the function to not clear any field\n    );\n\n    // TODO: should be handled by box\n    setTimeout(function () {\n      var successMessage = i18n.html(m, ['success', 'forgotPassword']);\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setGlobalSuccess, successMessage);\n    }, 500);\n  } else {\n    if (l.ui.autoclose(m)) {\n      (0, _actions.closeLock)(id);\n    } else {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n        return l.setSubmitting(m, false).set('passwordResetted', true);\n      });\n    }\n  }\n}\nfunction resetPasswordError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var errorMessage = i18n.html(m, ['error', 'forgotPassword', error.code]) || i18n.html(m, ['error', 'forgotPassword', 'lock.fallback']);\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\nfunction showLoginActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'login', fields);\n}\nfunction showSignUpActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'signUp', fields);\n}\nfunction showResetPasswordActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'forgotPassword', fields);\n}\nfunction cancelResetPassword(id) {\n  return showLoginActivity(id);\n}\nfunction cancelMFALogin(id) {\n  return showLoginActivity(id);\n}\nfunction toggleTermsAcceptance(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.toggleTermsAcceptance);\n}\nfunction showLoginMFAActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['mfa_code'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'mfaLogin', fields);\n}","map":{"version":3,"names":["exports","__esModule","logIn","signUp","signUpError","resetPassword","showLoginActivity","showSignUpActivity","showResetPasswordActivity","cancelResetPassword","cancelMFALogin","toggleTermsAcceptance","showLoginMFAActivity","_index","require","_web_api","_web_api2","_interopRequireDefault","_actions","_index2","l","_interopRequireWildcard","_index3","c","_dompurify","_index4","_i18n","i18n","_captcha","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","id","needsMFA","arguments","length","undefined","m","read","getEntity","usernameField","databaseLogInWithEmail","username","getFieldValue","params","connection","databaseConnectionName","password","fields","isCaptchaValid","setCaptchaParams","showMissingCaptcha","mfaCode","push","error","next","wasInvalid","code","swapCaptcha","generateRandomUsername","result","characters","charactersLength","i","charAt","Math","floor","random","databaseConnectionRequiresUsername","signUpHideUsernameField","additionalSignUpFields","forEach","x","get","validateAndSubmit","email","autoLogin","shouldAutoLogin","usernameValidation","databaseConnection","getIn","range","toJS","max","isEmpty","user_metadata","storage","fieldName","fieldValue","sanitize","ALLOWED_TAGS","errorHandler","popupHandler","_current_popup","kill","wasInvalidCaptcha","setTimeout","context","runHook","_len","args","Array","_key","signUpSuccess","apply","concat","e","lock","emitEvent","swap","updateEntity","set","options","auth","_len2","_key2","autoLogInError","logInSuccess","autoclose","ui","setSubmitting","closeLock","invalidPasswordKeys","PasswordDictionaryError","PasswordNoUserInfoError","PasswordStrengthError","errorKey","name","errorMessage","html","description","loginErrorMessage","hasScreen","setScreen","resetPasswordError","resetPasswordSuccess","successMessage","setGlobalSuccess"],"sources":["C:/Users/diskk/OneDrive/Desktop/New folder/Transport_modal/node_modules/auth0-lock/lib/connection/database/actions.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.logIn = logIn;\nexports.signUp = signUp;\nexports.signUpError = signUpError;\nexports.resetPassword = resetPassword;\nexports.showLoginActivity = showLoginActivity;\nexports.showSignUpActivity = showSignUpActivity;\nexports.showResetPasswordActivity = showResetPasswordActivity;\nexports.cancelResetPassword = cancelResetPassword;\nexports.cancelMFALogin = cancelMFALogin;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.showLoginMFAActivity = showLoginMFAActivity;\n\nvar _index = require('../../store/index');\n\nvar _web_api = require('../../core/web_api');\n\nvar _web_api2 = _interopRequireDefault(_web_api);\n\nvar _actions = require('../../core/actions');\n\nvar _index2 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nvar _index3 = require('../../field/index');\n\nvar c = _interopRequireWildcard(_index3);\n\nvar _dompurify = require('dompurify');\n\nvar _index4 = require('./index');\n\nvar _i18n = require('../../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _captcha = require('../captcha');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction logIn(id) {\n  var needsMFA = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var usernameField = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  var username = c.getFieldValue(m, usernameField);\n\n  var params = {\n    connection: (0, _index4.databaseConnectionName)(m),\n    username: username,\n    password: c.getFieldValue(m, 'password')\n  };\n\n  var fields = [usernameField, 'password'];\n  var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, false, fields);\n\n  if (!isCaptchaValid) {\n    return (0, _captcha.showMissingCaptcha)(m, id);\n  }\n\n  var mfaCode = c.getFieldValue(m, 'mfa_code');\n\n  if (needsMFA) {\n    params['mfa_code'] = mfaCode;\n    fields.push('mfa_code');\n  }\n\n  (0, _actions.logIn)(id, fields, params, function (id, error, fields, next) {\n    if (error.error === 'a0.mfa_required') {\n      return showLoginMFAActivity(id);\n    }\n\n    if (error) {\n      var wasInvalid = error && error.code === 'invalid_captcha';\n      return (0, _captcha.swapCaptcha)(id, false, wasInvalid, next);\n    }\n\n    next();\n  });\n}\n\nfunction generateRandomUsername(length) {\n  var result = '';\n  var characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nfunction signUp(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var fields = ['email', 'password'];\n\n  // Skip the username validation if signUpHideUsernameField option is enabled.\n  // We will generate a random username to avoid name collusion before we make the signup API call.\n  if ((0, _index4.databaseConnectionRequiresUsername)(m) && !(0, _index4.signUpHideUsernameField)(m)) fields.push('username');\n\n  (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n    return fields.push(x.get('name'));\n  });\n\n  (0, _actions.validateAndSubmit)(id, fields, function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email'),\n      password: c.getFieldValue(m, 'password'),\n      autoLogin: (0, _index4.shouldAutoLogin)(m)\n    };\n\n    var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, false, fields);\n    if (!isCaptchaValid) {\n      return (0, _captcha.showMissingCaptcha)(m, id);\n    }\n\n    if ((0, _index4.databaseConnectionRequiresUsername)(m)) {\n      if ((0, _index4.signUpHideUsernameField)(m)) {\n        var usernameValidation = (0, _index4.databaseConnection)(m).getIn(['validation', 'username']);\n        var range = usernameValidation ? usernameValidation.toJS() : { max: 15 };\n        params.username = generateRandomUsername(range.max);\n      } else {\n        params.username = c.getFieldValue(m, 'username');\n      }\n    }\n\n    if (!(0, _index4.additionalSignUpFields)(m).isEmpty()) {\n      params.user_metadata = {};\n      (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n        var storage = x.get('storage');\n        var fieldName = x.get('name');\n        var fieldValue = (0, _dompurify.sanitize)(c.getFieldValue(m, x.get('name')), { ALLOWED_TAGS: [] });\n\n        switch (storage) {\n          case 'root':\n            params[fieldName] = fieldValue;\n            break;\n          default:\n            if (!params.user_metadata) {\n              params.user_metadata = {};\n            }\n            params.user_metadata[fieldName] = fieldValue;\n            break;\n        }\n      });\n    }\n\n    var errorHandler = function errorHandler(error, popupHandler) {\n      if (!!popupHandler) {\n        popupHandler._current_popup.kill();\n      }\n\n      var wasInvalidCaptcha = error && error.code === 'invalid_captcha';\n\n      (0, _captcha.swapCaptcha)(id, false, wasInvalidCaptcha, function () {\n        setTimeout(function () {\n          return signUpError(id, error);\n        }, 250);\n      });\n    };\n\n    try {\n      // For now, always pass 'null' for the context as we don't need it yet.\n      // If we need it later, it'll save a breaking change in hooks already in use.\n      var context = null;\n\n      l.runHook(m, 'signingUp', context, function () {\n        _web_api2.default.signUp(id, params, function (error, result, popupHandler) {\n          for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            args[_key - 3] = arguments[_key];\n          }\n\n          if (error) {\n            errorHandler(error, popupHandler);\n          } else {\n            signUpSuccess.apply(undefined, [id, result, popupHandler].concat(args));\n          }\n        });\n      });\n    } catch (e) {\n      errorHandler(e);\n    }\n  });\n}\n\nfunction signUpSuccess(id, result, popupHandler) {\n  var lock = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  l.emitEvent(lock, 'signup success', result);\n\n  if ((0, _index4.shouldAutoLogin)(lock)) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return m.set('signedUp', true);\n    });\n\n    // TODO: check options, redirect is missing\n    var options = {\n      connection: (0, _index4.databaseConnectionName)(lock),\n      username: c.email(lock),\n      password: c.password(lock)\n    };\n\n    if (!!popupHandler) {\n      options.popupHandler = popupHandler;\n    }\n\n    return _web_api2.default.logIn(id, options, l.auth.params(lock).toJS(), function (error) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      if (error) {\n        setTimeout(function () {\n          return autoLogInError(id, error);\n        }, 250);\n      } else {\n        _actions.logInSuccess.apply(undefined, [id].concat(args));\n      }\n    });\n  }\n\n  var autoclose = l.ui.autoclose(lock);\n\n  if (!autoclose) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (lock) {\n      return l.setSubmitting(lock, false).set('signedUp', true);\n    });\n  } else {\n    (0, _actions.closeLock)(id, false);\n  }\n}\n\nfunction signUpError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  var invalidPasswordKeys = {\n    PasswordDictionaryError: 'password_dictionary_error',\n    PasswordNoUserInfoError: 'password_no_user_info_error',\n    PasswordStrengthError: 'password_strength_error'\n  };\n\n  l.emitEvent(m, 'signup error', error);\n\n  var errorKey = error.code === 'invalid_password' && invalidPasswordKeys[error.name] || error.code;\n\n  var errorMessage = i18n.html(m, ['error', 'signUp', errorKey]) || i18n.html(m, ['error', 'signUp', 'lock.fallback']);\n\n  if (error.code === 'hook_error') {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, error.description || errorMessage);\n    return;\n  }\n\n  if (errorKey === 'invalid_captcha') {\n    errorMessage = i18n.html(m, ['error', 'login', errorKey]);\n    return (0, _captcha.swapCaptcha)(id, false, true, function () {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n    });\n  }\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\n\nfunction autoLogInError(id, error) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    var errorMessage = l.loginErrorMessage(m, error);\n    if ((0, _index4.hasScreen)(m, 'login')) {\n      return l.setSubmitting((0, _index4.setScreen)(m, 'login'), false, errorMessage);\n    } else {\n      return l.setSubmitting(m, false, errorMessage);\n    }\n  });\n}\n\nfunction resetPassword(id) {\n  (0, _actions.validateAndSubmit)(id, ['email'], function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email')\n    };\n\n    _web_api2.default.resetPassword(id, params, function (error) {\n      if (error) {\n        setTimeout(function () {\n          return resetPasswordError(id, error);\n        }, 250);\n      } else {\n        resetPasswordSuccess(id);\n      }\n    });\n  });\n}\n\nfunction resetPasswordSuccess(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  if ((0, _index4.hasScreen)(m, 'login')) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return (0, _index4.setScreen)(l.setSubmitting(m, false), 'login', ['']);\n    } // array with one empty string tells the function to not clear any field\n    );\n\n    // TODO: should be handled by box\n    setTimeout(function () {\n      var successMessage = i18n.html(m, ['success', 'forgotPassword']);\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setGlobalSuccess, successMessage);\n    }, 500);\n  } else {\n    if (l.ui.autoclose(m)) {\n      (0, _actions.closeLock)(id);\n    } else {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n        return l.setSubmitting(m, false).set('passwordResetted', true);\n      });\n    }\n  }\n}\n\nfunction resetPasswordError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  var errorMessage = i18n.html(m, ['error', 'forgotPassword', error.code]) || i18n.html(m, ['error', 'forgotPassword', 'lock.fallback']);\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\n\nfunction showLoginActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'login', fields);\n}\n\nfunction showSignUpActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'signUp', fields);\n}\n\nfunction showResetPasswordActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'forgotPassword', fields);\n}\n\nfunction cancelResetPassword(id) {\n  return showLoginActivity(id);\n}\n\nfunction cancelMFALogin(id) {\n  return showLoginActivity(id);\n}\n\nfunction toggleTermsAcceptance(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.toggleTermsAcceptance);\n}\n\nfunction showLoginMFAActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['mfa_code'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'mfaLogin', fields);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}