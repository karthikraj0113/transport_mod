{"ast":null,"code":"import\"antd/es/row/style\";import _Row from\"antd/es/row\";import\"antd/es/col/style\";import _Col from\"antd/es/col\";import _toConsumableArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import _objectSpread from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectWithoutProperties from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import _slicedToArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";var _excluded=[\"style\"];/* eslint-disable no-param-reassign */import React,{useState,useCallback,useRef}from'react';import{DndProvider,useDrag,useDrop}from'react-dnd';import HTML5Backend from'react-dnd-html5-backend';import update from'immutability-helper';import{Link}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import FeatherIcon from'feather-icons-react';import{Scrollbars}from'react-custom-scrollbars';import{KanvanBoardWrap,BackShadow}from'./style';import KanbanBoardItem from'./overview/KanbanBoardItem';import UpdateTask from'./overview/UpdateTask';import{Main}from'../styled';import{PageHeader}from'../../components/page-headers/page-headers';import{Cards}from'../../components/cards/frame/cards-frame';import{Button}from'../../components/buttons/buttons';import{Dropdown}from'../../components/dropdown/dropdown';import{ShareButtonPageHeader}from'../../components/buttons/share-button/share-button';import{ExportButtonPageHeader}from'../../components/buttons/export-button/export-button';import{CalendarButtonPageHeader}from'../../components/buttons/calendar-button/calendar-button';import{ToAddBoard,ToAddTask,ToDeleteTask}from'../../redux/kanban/actionCreator';var BoardTitleUpdate=function BoardTitleUpdate(_ref){var boardTitle=_ref.boardTitle,boardId=_ref.boardId,_onBlur=_ref.onBlur;var _useState=useState(boardTitle),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var onChangeHandler=function onChangeHandler(e){setValue(e.target.value);};return/*#__PURE__*/React.createElement(_Input,{name:\"titile-edit\".concat(boardId),className:\"title-edit\",placeholder:\"Enter Title\",onChange:onChangeHandler,onBlur:function onBlur(){return _onBlur(boardId);},onPressEnter:function onPressEnter(){return _onBlur(boardId);},value:value});};/* \r\n  @Todo Remove unnecessary Code and variable\r\n*/var Kanban=function Kanban(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{rtl:state.ChangeLayoutMode.rtlData,boardData:state.KanbanBoard.boardData,tasks:state.KanbanBoard.taskData};}),rtl=_useSelector.rtl,boardData=_useSelector.boardData,tasks=_useSelector.tasks;var renderView=function renderView(_ref2){var style=_ref2.style,props=_objectWithoutProperties(_ref2,_excluded);var customStyle=_defineProperty({marginRight:'auto'},rtl?'marginLeft':'marginRight','-17px');return/*#__PURE__*/React.createElement(\"div\",Object.assign({},props,{style:_objectSpread(_objectSpread({},style),customStyle)}));};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addColumn=_useState4[0],setAddColumn=_useState4[1];var _useState5=useState({columnTitle:'',boardTitle:'',boardId:'',titleBoardId:'',checklistData:{id:1,boardId:1,checklist:[]},modalVisible:false,boardEditable:false,backShadow:false,taskId:''}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _Form$useForm=_Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var KanbanColumn=function KanbanColumn(_ref3){var status=_ref3.status,changeTaskStatus=_ref3.changeTaskStatus,children=_ref3.children;var ref=useRef(null);var _useDrop=useDrop({accept:'card',drop:function drop(item){changeTaskStatus(item.id,status);}}),_useDrop2=_slicedToArray(_useDrop,2),drop=_useDrop2[1];drop(ref);return/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_kanban-board-item\",ref:ref},/*#__PURE__*/React.createElement(Scrollbars,{autoHide:true,autoHideTimeout:500,autoHideDuration:200,renderView:renderView,className:\"sDash_kanban-board-item-scrolable\"},children));};var KanbanItem=function KanbanItem(_ref4){var id=_ref4.id,children=_ref4.children;var ref=useRef(null);var _useDrag=useDrag({item:{type:'card',id:id},collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,drag=_useDrag2[1];var opacity=isDragging?0:1;drag(ref);return/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_kanvan-task__single\",ref:ref,style:{opacity:opacity}},children);};var changeTaskStatus=useCallback(function(id,status){var task=tasks.find(function(item){return item.id===id;});var taskIndex=tasks.indexOf(task);task=_objectSpread(_objectSpread({},task),{},{boardId:status});var newTasks=update(tasks,_defineProperty({},taskIndex,{$set:task}));dispatch(ToAddTask(newTasks));},[tasks,dispatch]);var activeAddOption=function activeAddOption(e){e.preventDefault();setAddColumn(true);};var diActiveAddOption=function diActiveAddOption(e){e.preventDefault();setAddColumn(false);};var onColumnTitleChange=function onColumnTitleChange(e){setState(_objectSpread(_objectSpread({},state),{},{columnTitle:e.target.value}));};var columnTitle=state.columnTitle,taskId=state.taskId,boardId=state.boardId,backShadow=state.backShadow,checklistData=state.checklistData,modalVisible=state.modalVisible,titleBoardId=state.titleBoardId;var addColumnHandler=function addColumnHandler(){var arrayData=[];boardData.map(function(data){return arrayData.push(data.boardId);});var max=Math.max.apply(Math,arrayData);if(columnTitle!==''){dispatch(ToAddBoard([].concat(_toConsumableArray(boardData),[{boardId:max+1,title:columnTitle}])));setState(_objectSpread(_objectSpread({},state),{},{columnTitle:''}));setAddColumn(false);}else{alert('Please Enter a Column Ttile');}};var deleteColumnHandler=function deleteColumnHandler(id){var afterDeleteData=boardData.filter(function(board){return board.boardId!==id;});var confirm=window.confirm('Are You sure to delete this?');if(confirm){dispatch(ToAddBoard(afterDeleteData));}return false;};var addTaskHandler=function addTaskHandler(id){var arrayData=[];var taskItem=document.querySelector(\"input[name=\\\"taskInput-\".concat(id,\"\\\"]\")).value;tasks.map(function(data){return arrayData.push(data.id);});var max=Math.max.apply(Math,arrayData);if(taskItem!==''){dispatch(ToAddTask([].concat(_toConsumableArray(tasks),[{id:\"\".concat(max+1),boardId:boardId,title:taskItem,checklist:[]}])));setState(_objectSpread(_objectSpread({},state),{},{boardId:''}));}else{alert('Please Enter a Task Ttile');}};var handleOnAddTask=function handleOnAddTask(e,id){e.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{boardId:id}));};var handleOffAddTask=function handleOffAddTask(e){e.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{boardId:''}));};var showModal=function showModal(dataList){setState(_objectSpread(_objectSpread({},state),{},{modalVisible:!modalVisible,checklistData:dataList}));};var handleCancel=function handleCancel(){setState(_objectSpread(_objectSpread({},state),{},{modalVisible:false}));};var onBoardEditable=function onBoardEditable(e,id,title){e.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{boardEditable:true,boardTitle:title,titleBoardId:id}));};var onBoardEditableHide=function onBoardEditableHide(id){boardData.map(function(board){if(board.boardId===id){board.title=document.querySelector(\"input[name=\\\"titile-edit\".concat(id,\"\\\"]\")).value;}return board;});dispatch(ToAddBoard(boardData));setState(_objectSpread(_objectSpread({},state),{},{boardEditable:false,titleBoardId:''}));};var onBoardTitleChange=function onBoardTitleChange(event){event.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{boardTitle:event.target.value}));};var onBackShadow=function onBackShadow(id){setState(_objectSpread(_objectSpread({},state),{},{backShadow:true,taskId:id}));};var onBackShadowHide=function onBackShadowHide(){setState(_objectSpread(_objectSpread({},state),{},{backShadow:false,taskId:''}));};var onTaskTitleUpdate=function onTaskTitleUpdate(value,id){tasks.map(function(task){if(task.id===id){task.title=value;setState(_objectSpread(_objectSpread({},state),{},{backShadow:false,taskId:''}));}return task;});dispatch(ToAddTask(tasks));};var onTaskTitleDelete=function onTaskTitleDelete(e,id){e.preventDefault();var afterDeleteTask=tasks.filter(function(task){return task.id!==id;});setState(_objectSpread(_objectSpread({},state),{},{backShadow:false,taskId:''}));dispatch(ToDeleteTask(afterDeleteTask));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PageHeader,{title:\"Kanban\",buttons:[/*#__PURE__*/React.createElement(\"div\",{key:\"1\",className:\"page-header-actions\"},/*#__PURE__*/React.createElement(CalendarButtonPageHeader,null),/*#__PURE__*/React.createElement(ExportButtonPageHeader,null),/*#__PURE__*/React.createElement(ShareButtonPageHeader,null),/*#__PURE__*/React.createElement(Button,{size:\"small\",type:\"primary\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"plus\",size:14}),\"Add New\"))]}),/*#__PURE__*/React.createElement(Main,null,/*#__PURE__*/React.createElement(_Row,{gutter:15},/*#__PURE__*/React.createElement(_Col,{xs:24},/*#__PURE__*/React.createElement(KanvanBoardWrap,null,/*#__PURE__*/React.createElement(Cards,{headless:true,title:\"Product Design\"},/*#__PURE__*/React.createElement(DndProvider,{backend:HTML5Backend},/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_kanban-board-list\"},boardData.map(function(board){return/*#__PURE__*/React.createElement(KanbanColumn,{key:board.boardId,status:board.boardId,changeTaskStatus:changeTaskStatus},/*#__PURE__*/React.createElement(\"div\",{className:board.boardId===titleBoardId?'sDash_kanban-board-item__header editable':'sDash_kanban-board-item__header'},/*#__PURE__*/React.createElement(\"h4\",{className:\"list-header-title\"},/*#__PURE__*/React.createElement(\"span\",null,board.title),/*#__PURE__*/React.createElement(Dropdown,{content:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{onClick:function onClick(e){return onBoardEditable(e,board.boardId,board.title);},to:\"#\"},/*#__PURE__*/React.createElement(\"span\",null,\"Edit Card Title\")),/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return deleteColumnHandler(board.boardId);},to:\"#\"},/*#__PURE__*/React.createElement(\"span\",null,\"Delete Card\"))),action:['click'],className:\"wide-dropdwon kanbanCard-more\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"btn-more\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"more-horizontal\",size:14})))),/*#__PURE__*/React.createElement(BoardTitleUpdate,{boardId:titleBoardId,boardTitle:state.boardTitle,onBoardTitleChange:onBoardTitleChange,onBlur:onBoardEditableHide})),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_kanvan-task\"},tasks.filter(function(item){return item.boardId===board.boardId;}).map(function(item){return/*#__PURE__*/React.createElement(KanbanItem,{key:item.id,id:item.id},/*#__PURE__*/React.createElement(KanbanBoardItem,{taskId:taskId,onBackShadow:onBackShadow,onTaskTitleUpdate:onTaskTitleUpdate,onTaskTitleDelete:onTaskTitleDelete,showModal:showModal,data:item}));})),/*#__PURE__*/React.createElement(\"div\",{className:board.boardId===boardId?'sDash_addTask-control add-task-on':'sDash_addTask-control'},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"btn-addTask\",onClick:function onClick(e){return handleOnAddTask(e,board.boardId);}},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"plus\",size:12}),/*#__PURE__*/React.createElement(\"span\",null,\"Add Task\")),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_addTask-from\"},/*#__PURE__*/React.createElement(_Input,{name:\"taskInput-\".concat(board.boardId),className:\"sDash_addTask-input\",placeholder:\"Enter a Title\",onPressEnter:function onPressEnter(){return addTaskHandler(board.boardId);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_addTask-action\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return addTaskHandler(board.boardId);},className:\"add-column\",htmlType:\"submit\",size:\"small\",type:\"primary\"},\"Add\"),/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:handleOffAddTask},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"x\",size:18}))))));}),/*#__PURE__*/React.createElement(\"div\",{className:addColumn?'btn-addColumn add-column-on':'btn-addColumn'},/*#__PURE__*/React.createElement(\"div\",{className:\"btn-addColumn-inner\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"btn-add\",onClick:activeAddOption},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"plus\",size:12}),/*#__PURE__*/React.createElement(\"span\",null,\"Add Column\")),/*#__PURE__*/React.createElement(_Form,{className:\"addColumn-form\",name:\"columnAdd\",form:form,onFinish:addColumnHandler},/*#__PURE__*/React.createElement(\"div\",{className:\"btn-addColumn-form\"},/*#__PURE__*/React.createElement(_Input,{value:columnTitle,className:\"sDash-add-column-input\",onChange:onColumnTitleChange,placeholder:\"Enter Column Title\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_add-column-action\"},/*#__PURE__*/React.createElement(Button,{className:\"add-column\",htmlType:\"submit\",size:\"small\",type:\"primary\"},\"Add\"),/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:diActiveAddOption},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"x\",size:18})))))))))))))),/*#__PURE__*/React.createElement(UpdateTask,{handleCancel:handleCancel,modalVisible:modalVisible,data:checklistData}),backShadow?/*#__PURE__*/React.createElement(BackShadow,{onClick:onBackShadowHide}):null);};export default Kanban;","map":null,"metadata":{},"sourceType":"module"}