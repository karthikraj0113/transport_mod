{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import\"antd/es/progress/style\";import _Progress from\"antd/es/progress\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import _toConsumableArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";/* eslint-disable no-param-reassign */ /* eslint-disable no-return-assign */import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import{Link}from'react-router-dom';import FeatherIcon from'feather-icons-react';import{ChecklistWrap}from'../style';import{Dropdown}from'../../../components/dropdown/dropdown';import{Checkbox}from'../../../components/checkbox/checkbox';import{Button}from'../../../components/buttons/buttons';import{ToAddTask}from'../../../redux/kanban/actionCreator';var UpdateTask=function UpdateTask(_ref){var data=_ref.data,modalVisible=_ref.modalVisible,handleCancel=_ref.handleCancel;var checklist=data.checklist;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{tasks:state.KanbanBoard.taskData};}),tasks=_useSelector.tasks;var _useState=useState({editable:false,checkListPopup:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var editable=state.editable,checkListPopup=state.checkListPopup;var handleTaskEdit=function handleTaskEdit(){setState(_objectSpread(_objectSpread({},state),{},{editable:!editable}));};var onCancelEdit=function onCancelEdit(e){e.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{editable:false}));};var _onChange=function onChange(value,listId,taskId){tasks.map(function(task){if(data.id===task.id){task.checklist.map(function(list){if(list.id===listId){list.checkListTask.map(function(item){if(item.id===taskId)item.checked=value;return item;});}return list;});}return task;});dispatch(ToAddTask(tasks));};var onCheckListItemDelete=function onCheckListItemDelete(listId,taskId){var confirm=window.confirm('Are you sure to delete this?');if(confirm){tasks.map(function(task){if(data.id===task.id){task.checklist.map(function(list){if(list.id===listId){var afterDeleteData=list.checkListTask.filter(function(item){return item.id!==taskId;});list.checkListTask=afterDeleteData;}return list;});}return task;});dispatch(ToAddTask(tasks));}return false;};var onCheckListItemAdd=function onCheckListItemAdd(listId,checkListTask){var arrayData=[];var checkItem=document.querySelector(\"input[name=\\\"checkListAddInputValue\\\"]\").value;checkListTask.map(function(item){return arrayData.push(item.id);});var max=checkListTask.length?Math.max.apply(Math,arrayData):0;tasks.map(function(task){if(data.id===task.id){task.checklist.map(function(list){if(list.id===listId){list.checkListTask=[].concat(_toConsumableArray(checkListTask),[{id:\"\".concat(max+1),label:checkItem,checked:false}]);}return list;});}return task;});dispatch(ToAddTask(tasks));setState(_objectSpread(_objectSpread({},state),{},{checkListPopup:''}));};var onCheckListSubmit=function onCheckListSubmit(id,boardId,checkList){var arrayData=[];var checkItem=document.querySelector(\"input[name=\\\"checkListInputValue\\\"]\").value;checkList.map(function(item){return arrayData.push(item.id);});var max=checkList.length?Math.max.apply(Math,arrayData):0;tasks.map(function(item){if(item.id===id&&item.boardId===boardId){return item.checklist=[].concat(_toConsumableArray(checkList),[{id:\"\".concat(max+1),label:checkItem,checkListTask:[]}]);}return item;});dispatch(ToAddTask(tasks));setState(_objectSpread(_objectSpread({},state),{},{editable:false}));};var onCheckListDelete=function onCheckListDelete(id,boardId,checkList,delId,event){event.preventDefault();var confirm=window.confirm('Are you sure to delete this?');if(confirm){tasks.map(function(item){if(item.id===id&&item.boardId===boardId){return item.checklist=checkList.filter(function(listItem){return listItem.id!==delId;});}return item;});dispatch(ToAddTask(tasks));}return false;};var onShowChecklistAddPopup=function onShowChecklistAddPopup(id){setState(_objectSpread(_objectSpread({},state),{},{checkListPopup:id}));};var onHideChecklistAddPopup=function onHideChecklistAddPopup(){setState(_objectSpread(_objectSpread({},state),{},{checkListPopup:''}));};return/*#__PURE__*/React.createElement(_Modal,{title:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h4\",null,data.title),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"sub-text\"},\"in list Active Project\")),wrapClassName:\"sDash_task-details\",visible:modalVisible,footer:null,onCancel:handleCancel},/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_task-details-modal\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_task-details-modal__description\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sDash_task-details__label\"},\"Description\"),/*#__PURE__*/React.createElement(\"textarea\",{name:\"task-details-label\",placeholder:\"Add a more detailed description\\u2026\"}))),/*#__PURE__*/React.createElement(ChecklistWrap,null,/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_checklist-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"addChecklist-wrap\"},/*#__PURE__*/React.createElement(Button,{onClick:handleTaskEdit,className:\"btn-checklist\",type:\"primary\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"check-square\",size:14}),\"Add Checklist\"),!editable?null:/*#__PURE__*/React.createElement(\"div\",{className:\"addChecklist-form\"},/*#__PURE__*/React.createElement(_Input,{name:\"checkListInputValue\",className:\"add-checklist\",placeholder:\"Checklist Title\",onPressEnter:function onPressEnter(){return onCheckListSubmit(data.id,data.boardId,checklist);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"addChecklist-form-action\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return onCheckListSubmit(data.id,data.boardId,checklist);},className:\"btn-add\",size:\"small\",type:\"primary\"},\"Add\"),/*#__PURE__*/React.createElement(Link,{onClick:onCancelEdit,to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"x\",size:18}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_checklist-row\"},checklist.map(function(item,i){var checkedLength=item.checkListTask.filter(function(checked){return checked.checked===true;});return/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_checklist-item\",key:i},/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_checklist-item__top\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"sDash_checklist-item__title\"},item.label,\" \"),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(event){return onCheckListDelete(data.id,data.boardId,checklist,item.id,event);},className:\"btn-delete\",type:\"light\"},\"Delete\")),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_checklist__progress\"},item.checkListTask.length?/*#__PURE__*/React.createElement(_Progress,{percent:Math.round(100*checkedLength.length/item.checkListTask.length)}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"sDash_checklist-tasks-wrap\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"sDash_checklist-tasks\"},item.checkListTask.map(function(task,i){return/*#__PURE__*/React.createElement(\"li\",{className:\"sDash_checklist-tasks__single\",key:i},/*#__PURE__*/React.createElement(Checkbox,{checked:task.checked,onChange:function onChange(value){return _onChange(value,item.id,task.id);}},/*#__PURE__*/React.createElement(\"span\",{className:\"sDash_task-label\"},task.label)),/*#__PURE__*/React.createElement(Dropdown,{content:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return onCheckListItemDelete(item.id,task.id);},to:\"#\"},/*#__PURE__*/React.createElement(\"span\",null,\"Delete List\"))),action:['click'],className:\"wide-dropdwon kanbanCard-more\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"btn-more\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"more-horizontal\",size:14}))));})),/*#__PURE__*/React.createElement(\"div\",{className:\"addChecklistTask-wrap\"},checkListPopup!==\"cp-\".concat(item.id)?/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return onShowChecklistAddPopup(\"cp-\".concat(item.id));},className:\"add-item\",type:\"light\"},\"Add an Item\"):/*#__PURE__*/React.createElement(\"div\",{className:\"addChecklistTask-form\"},/*#__PURE__*/React.createElement(_Input,{name:\"checkListAddInputValue\",className:\"add-checklistTask\",placeholder:\"Checklist Title\",onPressEnter:function onPressEnter(){return onCheckListItemAdd(item.id,item.checkListTask);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"addChecklistTask-form-action\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return onCheckListItemAdd(item.id,item.checkListTask);},className:\"btn-add\",size:\"small\",type:\"primary\"},\"Add\"),/*#__PURE__*/React.createElement(Link,{onClick:onHideChecklistAddPopup,to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"x\",size:18})))))));})))));};export default UpdateTask;","map":null,"metadata":{},"sourceType":"module"}