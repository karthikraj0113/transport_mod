{"ast":null,"code":"import\"antd/es/calendar/style\";import _Calendar from\"antd/es/calendar\";import _toConsumableArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useLayoutEffect,useRef}from'react';import FeatherIcon from'feather-icons-react';import{Link,NavLink}from'react-router-dom';import CalenDar from'react-calendar';import moment from'moment';import{useSelector,useDispatch}from'react-redux';import ProjectUpdate from'./ProjectUpdate';import AddNewEvent from'./AddNewEvent';import{BlockViewCalendarWrapper}from'../Style';import{Cards}from'../../../components/cards/frame/cards-frame';import{Button}from'../../../components/buttons/buttons';import{Dropdown}from'../../../components/dropdown/dropdown';import'./style.css';import{calendarDeleteData,eventVisible,addNewEvents}from'../../../redux/calendar/actionCreator';import{Modal}from'../../../components/modals/antd-modals';var MonthCalendar=function MonthCalendar(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{events:state.Calender.events,isVisible:state.Calender.eventVisible};}),events=_useSelector.events,isVisible=_useSelector.isVisible;var _useState=useState({date:new Date(),container:null,currentLabel:moment().format('MMMM YYYY'),width:0,defaultValue:moment().format('YYYY-MM-DD')}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var date=state.date,container=state.container,currentLabel=state.currentLabel,width=state.width,defaultValue=state.defaultValue;var getInput=useRef();useLayoutEffect(function(){var button=document.querySelector('.calendar-header__left .react-calendar__navigation .react-calendar__navigation__label');var containers=document.querySelector('.calendar-header__left .react-calendar__viewContainer');var calenderDom=document.querySelectorAll('.ant-picker-calendar-date-content');calenderDom.forEach(function(element){element.addEventListener('click',function(e){if(e.target.classList[0]==='ant-picker-calendar-date-content'){var getDate=moment(e.currentTarget.closest('td').getAttribute('title')).format('YYYY-MM-DD');setState({container:containers,date:date,currentLabel:currentLabel,width:getInput.current!==null&&getInput.current.clientWidth,defaultValue:getDate});dispatch(eventVisible(true));}});});button.addEventListener('click',function(){return containers.classList.add('show');});setState({container:containers,defaultValue:defaultValue,date:date,currentLabel:currentLabel,width:getInput.current!==null&&getInput.current.clientWidth});},[date,currentLabel,defaultValue,dispatch]);var onChange=function onChange(dt){return setState(_objectSpread(_objectSpread({},state),{},{date:dt,defautlValue:moment(dt).format('YYYY-MM-DD')}));};var onEventDelete=function onEventDelete(id){var data=events.filter(function(item){return item.id!==id;});dispatch(calendarDeleteData(data));};function getListData(value){var listData;var data=[];events.map(function(event){if(moment(event.date[0]).format('MMMM YYYY')===currentLabel){var label=event.label,title=event.title,id=event.id,description=event.description,time=event.time,_date=event.date,type=event.type;var a=moment(moment(event.date[1]).format('DD MMMM YYYY'));var b=moment(moment(event.date[0]).format('DD MMMM YYYY'));var totalDays=a.diff(b,'days');switch(value.date()){case parseInt(moment(event.date[0]).format('DD'),10):data.push({label:label,title:title,id:id,totalDays:totalDays,description:description,time:time,date:_date,type:type});listData=data;break;default:}}return listData;});return listData||[];}function dateCellRender(value){var listData=getListData(value);return/*#__PURE__*/React.createElement(\"ul\",{className:\"events\"},listData.map(function(item){return/*#__PURE__*/React.createElement(Dropdown,{className:\"event-dropdown\",key:item.id,style:{padding:0},placement:\"bottomLeft\",content:/*#__PURE__*/React.createElement(ProjectUpdate,Object.assign({onEventDelete:onEventDelete},item)),action:['click']},/*#__PURE__*/React.createElement(\"li\",{ref:getInput},/*#__PURE__*/React.createElement(Link,{style:{width:width*(item.totalDays+1)},className:item.label,to:\"#\"},item.title)));}));}var handleCancel=function handleCancel(){dispatch(eventVisible(false));};var addNew=function addNew(event){var arrayData=[];events.map(function(data){return arrayData.push(data.id);});var max=Math.max.apply(Math,arrayData);dispatch(addNewEvents([].concat(_toConsumableArray(events),[_objectSpread(_objectSpread({},event),{},{id:max+1})])));dispatch(eventVisible(false));};return/*#__PURE__*/React.createElement(Cards,{headless:true},/*#__PURE__*/React.createElement(Modal,{className:\"addEvent-modal\",footer:null,type:\"primary\",title:\"Create Event\",visible:isVisible,onCancel:handleCancel},/*#__PURE__*/React.createElement(AddNewEvent,{onHandleAddEvent:addNew,defaultValue:defaultValue})),/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header__left\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-today\",type:\"white\",outlined:true},/*#__PURE__*/React.createElement(NavLink,{to:\"./day\"},\"Today\")),/*#__PURE__*/React.createElement(CalenDar,{onClickMonth:function onClickMonth(){container.classList.remove('show');},onActiveStartDateChange:function onActiveStartDateChange(_ref){var activeStartDate=_ref.activeStartDate;return setState(_objectSpread(_objectSpread({},state),{},{currentLabel:moment(activeStartDate).format('MMMM YYYY'),defaultValue:moment(activeStartDate).format('YYYY-MM-DD')}));},next2Label:null,prev2Label:null,nextLabel:/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"chevron-right\"}),prevLabel:/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"chevron-left\"}),onChange:onChange,value:state.date})),/*#__PURE__*/React.createElement(\"div\",{className:\"calendar-header__right\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./day\"},\"Day\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./week\"},\"Week\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./month\"},\"Month\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"./year\"},\"Year\"))),/*#__PURE__*/React.createElement(NavLink,{className:\"schedule-list\",to:\"./schedule\"},/*#__PURE__*/React.createElement(FeatherIcon,{icon:\"list\"}),\"Schedule\"))),/*#__PURE__*/React.createElement(BlockViewCalendarWrapper,{className:\"table-responsive\"},/*#__PURE__*/React.createElement(_Calendar,{headerRender:function headerRender(){return/*#__PURE__*/React.createElement(React.Fragment,null);},mode:\"month\",dateCellRender:dateCellRender,value:moment(defaultValue),defaultValue:moment(defaultValue)})));};export default MonthCalendar;","map":null,"metadata":{},"sourceType":"module"}