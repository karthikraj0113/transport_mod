{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isComposable = isComposable;\nexports.default = queriesReducer;\nvar _unset2 = _interopRequireDefault(require(\"lodash/unset\"));\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\nvar _immer = _interopRequireDefault(require(\"immer\"));\nvar _constants = require(\"../constants\");\nvar _query = require(\"../utils/query\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction isComposable(action) {\n  return !!(0, _get2.default)(action, 'meta.where') && !!(0, _get2.default)(action, 'meta.collection');\n}\nfunction queriesReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return (0, _immer.default)(state, function (draft) {\n    if (!isComposable(action)) {\n      return state;\n    }\n    var key = (0, _query.getBaseQueryName)(action.meta);\n    switch (action.type) {\n      case _constants.actionTypes.GET_SUCCESS:\n      case _constants.actionTypes.LISTENER_RESPONSE:\n        draft[key] = _objectSpread({\n          data: action.payload.data\n        }, action.meta);\n        return draft;\n      case _constants.actionTypes.UNSET_LISTENER:\n        if (draft[key]) {\n          draft[key].data = undefined;\n        }\n        return draft;\n      case _constants.actionTypes.DOCUMENT_ADDED:\n      case _constants.actionTypes.DOCUMENT_MODIFIED:\n        (0, _set2.default)(draft, [key, 'data', action.meta.doc], action.payload.data);\n        return draft;\n      case _constants.actionTypes.DOCUMENT_REMOVED:\n      case _constants.actionTypes.DELETE_SUCCESS:\n        (0, _unset2.default)(draft, [key, 'data', action.meta.doc]);\n        return draft;\n      default:\n        return state;\n    }\n  });\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","isComposable","default","queriesReducer","_unset2","_interopRequireDefault","require","_get2","_set2","_immer","_constants","_query","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","action","state","undefined","draft","getBaseQueryName","meta","type","actionTypes","GET_SUCCESS","LISTENER_RESPONSE","data","payload","UNSET_LISTENER","DOCUMENT_ADDED","DOCUMENT_MODIFIED","doc","DOCUMENT_REMOVED","DELETE_SUCCESS"],"sources":["C:/Users/diskk/OneDrive/Desktop/New folder/Transport_modal/node_modules/redux-firestore/es/reducers/queriesReducer.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isComposable = isComposable;\nexports.default = queriesReducer;\n\nvar _unset2 = _interopRequireDefault(require(\"lodash/unset\"));\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _constants = require(\"../constants\");\n\nvar _query = require(\"../utils/query\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction isComposable(action) {\n  return !!(0, _get2.default)(action, 'meta.where') && !!(0, _get2.default)(action, 'meta.collection');\n}\n\nfunction queriesReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return (0, _immer.default)(state, function (draft) {\n    if (!isComposable(action)) {\n      return state;\n    }\n\n    var key = (0, _query.getBaseQueryName)(action.meta);\n\n    switch (action.type) {\n      case _constants.actionTypes.GET_SUCCESS:\n      case _constants.actionTypes.LISTENER_RESPONSE:\n        draft[key] = _objectSpread({\n          data: action.payload.data\n        }, action.meta);\n        return draft;\n\n      case _constants.actionTypes.UNSET_LISTENER:\n        if (draft[key]) {\n          draft[key].data = undefined;\n        }\n\n        return draft;\n\n      case _constants.actionTypes.DOCUMENT_ADDED:\n      case _constants.actionTypes.DOCUMENT_MODIFIED:\n        (0, _set2.default)(draft, [key, 'data', action.meta.doc], action.payload.data);\n        return draft;\n\n      case _constants.actionTypes.DOCUMENT_REMOVED:\n      case _constants.actionTypes.DELETE_SUCCESS:\n        (0, _unset2.default)(draft, [key, 'data', action.meta.doc]);\n        return draft;\n\n      default:\n        return state;\n    }\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}