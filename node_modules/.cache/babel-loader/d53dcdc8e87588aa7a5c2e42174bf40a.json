{"ast":null,"code":"import\"antd/es/row/style\";import _Row from\"antd/es/row\";import\"antd/es/col/style\";import _Col from\"antd/es/col\";import\"antd/es/table/style\";import _Table from\"antd/es/table\";import _objectWithoutProperties from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\diskk\\\\OneDrive\\\\Desktop\\\\New folder\\\\Transport_modal\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";var _excluded=[\"style\"];import React,{useState,useEffect}from'react';import{NavLink,Link}from'react-router-dom';import FeatherIcon from'feather-icons-react';import{Scrollbars}from'react-custom-scrollbars';import{useDispatch,useSelector}from'react-redux';import{ComposableMap,Geographies,Geography,ZoomableGroup}from'react-simple-maps';import ReactTooltip from'react-tooltip';import{RegionList,RegionMap}from'../../style';import{Cards}from'../../../../components/cards/frame/cards-frame';import{regionFilterData,regionGetData}from'../../../../redux/chartContent/actionCreator';var geoUrl='https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json';var moreContent=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLink,{to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{size:16,icon:\"printer\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Printer\")),/*#__PURE__*/React.createElement(NavLink,{to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{size:16,icon:\"book-open\"}),/*#__PURE__*/React.createElement(\"span\",null,\"PDF\")),/*#__PURE__*/React.createElement(NavLink,{to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{size:16,icon:\"file-text\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Google Sheets\")),/*#__PURE__*/React.createElement(NavLink,{to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{size:16,icon:\"x\"}),/*#__PURE__*/React.createElement(\"span\",null,\"Excel (XLSX)\")),/*#__PURE__*/React.createElement(NavLink,{to:\"#\"},/*#__PURE__*/React.createElement(FeatherIcon,{size:16,icon:\"file\"}),/*#__PURE__*/React.createElement(\"span\",null,\"CSV\")));var regionColumns=[{title:'Top Region',dataIndex:'region',key:'region'},{title:'Sessions',dataIndex:'sessions',key:'sessions'}];var SessionsbyRegion=function SessionsbyRegion(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{regionState:state.chartContent.regionData,lpIsLoading:state.chartContent.lpLoading};}),regionState=_useSelector.regionState;var _useState=useState({region:'year'}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){if(regionGetData){dispatch(regionGetData());}},[dispatch]);var regionData=[];if(regionState!==null)regionState.map(function(item,key){return regionData.push({key:key+1,region:item[0],sessions:item[1]});});var handleActiveChangeRegion=function handleActiveChangeRegion(value){setState(_objectSpread(_objectSpread({},state),{},{region:value}));dispatch(regionFilterData(value));};var renderThumb=function renderThumb(_ref){var style=_ref.style,props=_objectWithoutProperties(_ref,_excluded);var thumbStyle={borderRadius:6,backgroundColor:'#F1F2F6',height:'220px'};return/*#__PURE__*/React.createElement(\"div\",{style:_objectSpread(_objectSpread({},style),thumbStyle),props:props});};var _useState3=useState({coordinates:[0,0],zoom:1}),_useState4=_slicedToArray(_useState3,2),position=_useState4[0],setPosition=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var rounded=function rounded(num){if(num>1000000000){return\"\".concat(Math.round(num/100000000)/10,\"Bn\");}if(num>1000000){return\"\".concat(Math.round(num/100000)/10,\"M\");}return\"\".concat(Math.round(num/100)/10,\"K\");};function handleZoomIn(){if(position.zoom>=4)return;setPosition(function(pos){return _objectSpread(_objectSpread({},pos),{},{zoom:pos.zoom*2});});}function handleZoomOut(){if(position.zoom<=1)return;setPosition(function(pos){return _objectSpread(_objectSpread({},pos),{},{zoom:pos.zoom/2});});}function handleMoveEnd(position){setPosition(position);}return/*#__PURE__*/React.createElement(Cards,{isbutton:/*#__PURE__*/React.createElement(\"div\",{className:\"card-nav\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",{className:state.region==='week'?'active':'deactivate'},/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return handleActiveChangeRegion('week');},to:\"#\"},\"Week\")),/*#__PURE__*/React.createElement(\"li\",{className:state.region==='month'?'active':'deactivate'},/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return handleActiveChangeRegion('month');},to:\"#\"},\"Month\")),/*#__PURE__*/React.createElement(\"li\",{className:state.region==='year'?'active':'deactivate'},/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return handleActiveChangeRegion('year');},to:\"#\"},\"Year\")))),title:\"Sessions by Region\",size:\"large\",more:moreContent},/*#__PURE__*/React.createElement(_Row,null,/*#__PURE__*/React.createElement(_Col,{xxl:10,md:11,xs:24},/*#__PURE__*/React.createElement(RegionList,null,/*#__PURE__*/React.createElement(Scrollbars,{autoHeight:true,autoHeightMin:280,autoHide:true,renderThumbVertical:renderThumb},/*#__PURE__*/React.createElement(_Table,{columns:regionColumns,dataSource:regionData,pagination:false})))),/*#__PURE__*/React.createElement(_Col,{xxl:14,md:13,xs:24},/*#__PURE__*/React.createElement(RegionMap,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactTooltip,null,content),/*#__PURE__*/React.createElement(ComposableMap,{\"data-tip\":\"\",\"data-html\":true,projectionConfig:{scale:window.innerWidth<=440?160:150},viewBox:\"110, 50, 800, 410\"},/*#__PURE__*/React.createElement(ZoomableGroup,{zoom:position.zoom,center:position.coordinates,onMoveEnd:handleMoveEnd},/*#__PURE__*/React.createElement(Geographies,{geography:geoUrl},function(_ref2){var geographies=_ref2.geographies;return geographies.map(function(geo){return/*#__PURE__*/React.createElement(Geography,{key:geo.rsmKey,geography:geo,onMouseEnter:function onMouseEnter(){var _geo$properties=geo.properties,NAME=_geo$properties.NAME,POP_EST=_geo$properties.POP_EST;setContent(\"\".concat(NAME,\" \\u2014 \").concat(rounded(POP_EST)));},onMouseLeave:function onMouseLeave(){setContent('');},fill:\"#DBE1E8\",stroke:\"#FFF\",strokeWidth:0.5,style:{default:{fill:'#DBE1E8',outline:'none'},hover:{fill:'#5F63F2',outline:'none'},pressed:{fill:'#5F63F2',outline:'none'}}});});}))),/*#__PURE__*/React.createElement(\"div\",{className:\"controls\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleZoomIn},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:\"3\"},/*#__PURE__*/React.createElement(\"line\",{x1:\"12\",y1:\"5\",x2:\"12\",y2:\"19\"}),/*#__PURE__*/React.createElement(\"line\",{x1:\"5\",y1:\"12\",x2:\"19\",y2:\"12\"}))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleZoomOut},/*#__PURE__*/React.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:\"3\"},/*#__PURE__*/React.createElement(\"line\",{x1:\"5\",y1:\"12\",x2:\"19\",y2:\"12\"})))))))));};export default SessionsbyRegion;","map":null,"metadata":{},"sourceType":"module"}