{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nexports.initTenant = initTenant;\nexports.tenantConnections = tenantConnections;\nexports.defaultDirectory = defaultDirectory;\nexports.defaultDirectoryName = defaultDirectoryName;\nvar _immutable = require('immutable');\nvar _immutable2 = _interopRequireDefault(_immutable);\nvar _auth0PasswordPolicies = require('auth0-password-policies');\nvar _auth0PasswordPolicies2 = _interopRequireDefault(_auth0PasswordPolicies);\nvar _data_utils = require('../../utils/data_utils');\nvar _index = require('../index');\nvar l = _interopRequireWildcard(_index);\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar _dataFns = (0, _data_utils.dataFns)(['client']),\n  initNS = _dataFns.initNS,\n  get = _dataFns.get;\nvar DEFAULT_CONNECTION_VALIDATION = {\n  username: {\n    min: 1,\n    max: 15\n  }\n};\nfunction formatConnectionValidation() {\n  var connectionValidation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (connectionValidation.username == null) {\n    return null;\n  }\n  var validation = _extends({}, DEFAULT_CONNECTION_VALIDATION, connectionValidation);\n  var defaultMin = DEFAULT_CONNECTION_VALIDATION.username.min;\n  var defaultMax = DEFAULT_CONNECTION_VALIDATION.username.max;\n  validation.username.min = parseInt(validation.username.min, 10) || defaultMin;\n  validation.username.max = parseInt(validation.username.max, 10) || defaultMax;\n  if (validation.username.min > validation.username.max) {\n    validation.username.min = defaultMin;\n    validation.username.max = defaultMax;\n  }\n  return validation;\n}\nvar emptyConnections = _immutable2.default.fromJS({\n  database: [],\n  enterprise: [],\n  passwordless: [],\n  social: [],\n  unknown: [] // TODO: should be oauth2\n});\n\nfunction initTenant(m, client_id, client) {\n  return initNS(m, formatTenant(client_id, client));\n}\nfunction formatTenant(client_id, o) {\n  return new _immutable2.default.fromJS({\n    connections: formatTenantConnections(client_id, o),\n    defaultDirectory: o.defaultDirectory || null\n  });\n}\nfunction formatTenantConnections(client_id, o) {\n  var result = emptyConnections.toJS();\n  var connectionTypes = Object.keys(o.connections).filter(function (name) {\n    return name != 'passwordless';\n  }); // disabled until lock supports passwordless connections within the same engine\n  var connections_filter = null;\n  if (o.clientsConnections && o.clientsConnections[client_id]) {\n    connections_filter = o.clientsConnections[client_id];\n  }\n  connectionTypes.forEach(function (connectionTypeName) {\n    var _result$connectionTyp;\n    var connections = o.connections[connectionTypeName].map(function (connection) {\n      return formatTenantConnection(connectionTypeName, connection);\n    }).filter(function (connection) {\n      return connections_filter === null || connections_filter.includes(connection.name);\n    });\n    (_result$connectionTyp = result[connectionTypeName]).push.apply(_result$connectionTyp, connections);\n  });\n  return result;\n}\nfunction formatTenantConnection(connectionType, connection) {\n  var result = {\n    name: connection.name,\n    strategy: connection.strategy,\n    type: connectionType\n  };\n  if (connectionType === 'database') {\n    if (connection.validation && connection.validation.passwordPolicy) {\n      result.passwordPolicy = connection.validation.passwordPolicy;\n    }\n    result.passwordPolicy = _auth0PasswordPolicies2.default[result.passwordPolicy || 'none'];\n    result.allowSignup = typeof connection.allowSignup === 'boolean' ? connection.allowSignup : true;\n    result.allowForgot = typeof connection.allowForgot === 'boolean' ? connection.allowForgot : true;\n    result.requireUsername = typeof connection.requiresUsername === 'boolean' ? connection.requiresUsername : false;\n    result.validation = formatConnectionValidation(connection.validation);\n  }\n  if (connectionType === 'enterprise') {\n    result.domains = connection.domains;\n  }\n  return result;\n}\nfunction tenantConnections(m) {\n  return get(m, 'connections', emptyConnections);\n}\nfunction defaultDirectory(m) {\n  var name = defaultDirectoryName(m);\n  return name && l.findConnection(m, name);\n}\nfunction defaultDirectoryName(m) {\n  return get(m, 'defaultDirectory', null);\n}","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","initTenant","tenantConnections","defaultDirectory","defaultDirectoryName","_immutable","require","_immutable2","_interopRequireDefault","_auth0PasswordPolicies","_auth0PasswordPolicies2","_data_utils","_index","l","_interopRequireWildcard","obj","newObj","default","_dataFns","dataFns","initNS","get","DEFAULT_CONNECTION_VALIDATION","username","min","max","formatConnectionValidation","connectionValidation","undefined","validation","defaultMin","defaultMax","parseInt","emptyConnections","fromJS","database","enterprise","passwordless","social","unknown","m","client_id","client","formatTenant","o","connections","formatTenantConnections","result","toJS","connectionTypes","keys","filter","name","connections_filter","clientsConnections","forEach","connectionTypeName","_result$connectionTyp","map","connection","formatTenantConnection","includes","push","apply","connectionType","strategy","type","passwordPolicy","allowSignup","allowForgot","requireUsername","requiresUsername","domains","findConnection"],"sources":["C:/Users/diskk/OneDrive/Desktop/New folder/Transport_modal/node_modules/auth0-lock/lib/core/tenant/index.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.initTenant = initTenant;\nexports.tenantConnections = tenantConnections;\nexports.defaultDirectory = defaultDirectory;\nexports.defaultDirectoryName = defaultDirectoryName;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _auth0PasswordPolicies = require('auth0-password-policies');\n\nvar _auth0PasswordPolicies2 = _interopRequireDefault(_auth0PasswordPolicies);\n\nvar _data_utils = require('../../utils/data_utils');\n\nvar _index = require('../index');\n\nvar l = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dataFns = (0, _data_utils.dataFns)(['client']),\n    initNS = _dataFns.initNS,\n    get = _dataFns.get;\n\nvar DEFAULT_CONNECTION_VALIDATION = { username: { min: 1, max: 15 } };\n\nfunction formatConnectionValidation() {\n  var connectionValidation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (connectionValidation.username == null) {\n    return null;\n  }\n\n  var validation = _extends({}, DEFAULT_CONNECTION_VALIDATION, connectionValidation);\n  var defaultMin = DEFAULT_CONNECTION_VALIDATION.username.min;\n  var defaultMax = DEFAULT_CONNECTION_VALIDATION.username.max;\n\n  validation.username.min = parseInt(validation.username.min, 10) || defaultMin;\n  validation.username.max = parseInt(validation.username.max, 10) || defaultMax;\n\n  if (validation.username.min > validation.username.max) {\n    validation.username.min = defaultMin;\n    validation.username.max = defaultMax;\n  }\n\n  return validation;\n}\n\nvar emptyConnections = _immutable2.default.fromJS({\n  database: [],\n  enterprise: [],\n  passwordless: [],\n  social: [],\n  unknown: [] // TODO: should be oauth2\n});\n\nfunction initTenant(m, client_id, client) {\n  return initNS(m, formatTenant(client_id, client));\n}\n\nfunction formatTenant(client_id, o) {\n  return new _immutable2.default.fromJS({\n    connections: formatTenantConnections(client_id, o),\n    defaultDirectory: o.defaultDirectory || null\n  });\n}\n\nfunction formatTenantConnections(client_id, o) {\n  var result = emptyConnections.toJS();\n  var connectionTypes = Object.keys(o.connections).filter(function (name) {\n    return name != 'passwordless';\n  }); // disabled until lock supports passwordless connections within the same engine\n  var connections_filter = null;\n\n  if (o.clientsConnections && o.clientsConnections[client_id]) {\n    connections_filter = o.clientsConnections[client_id];\n  }\n\n  connectionTypes.forEach(function (connectionTypeName) {\n    var _result$connectionTyp;\n\n    var connections = o.connections[connectionTypeName].map(function (connection) {\n      return formatTenantConnection(connectionTypeName, connection);\n    }).filter(function (connection) {\n      return connections_filter === null || connections_filter.includes(connection.name);\n    });\n    (_result$connectionTyp = result[connectionTypeName]).push.apply(_result$connectionTyp, connections);\n  });\n\n  return result;\n}\n\nfunction formatTenantConnection(connectionType, connection) {\n  var result = {\n    name: connection.name,\n    strategy: connection.strategy,\n    type: connectionType\n  };\n\n  if (connectionType === 'database') {\n    if (connection.validation && connection.validation.passwordPolicy) {\n      result.passwordPolicy = connection.validation.passwordPolicy;\n    }\n\n    result.passwordPolicy = _auth0PasswordPolicies2.default[result.passwordPolicy || 'none'];\n\n    result.allowSignup = typeof connection.allowSignup === 'boolean' ? connection.allowSignup : true;\n\n    result.allowForgot = typeof connection.allowForgot === 'boolean' ? connection.allowForgot : true;\n\n    result.requireUsername = typeof connection.requiresUsername === 'boolean' ? connection.requiresUsername : false;\n\n    result.validation = formatConnectionValidation(connection.validation);\n  }\n\n  if (connectionType === 'enterprise') {\n    result.domains = connection.domains;\n  }\n\n  return result;\n}\n\nfunction tenantConnections(m) {\n  return get(m, 'connections', emptyConnections);\n}\n\nfunction defaultDirectory(m) {\n  var name = defaultDirectoryName(m);\n  return name && l.findConnection(m, name);\n}\n\nfunction defaultDirectoryName(m) {\n  return get(m, 'defaultDirectory', null);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}