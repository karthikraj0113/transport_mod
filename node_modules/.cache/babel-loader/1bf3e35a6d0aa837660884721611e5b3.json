{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.initDatabase = initDatabase;\nexports.overrideDatabaseOptions = overrideDatabaseOptions;\nexports.defaultDatabaseConnection = defaultDatabaseConnection;\nexports.defaultDatabaseConnectionName = defaultDatabaseConnectionName;\nexports.databaseConnection = databaseConnection;\nexports.databaseConnectionName = databaseConnectionName;\nexports.forgotPasswordLink = forgotPasswordLink;\nexports.signUpLink = signUpLink;\nexports.setScreen = setScreen;\nexports.getScreen = getScreen;\nexports.availableScreens = availableScreens;\nexports.getInitialScreen = getInitialScreen;\nexports.hasInitialScreen = hasInitialScreen;\nexports.databaseConnectionRequiresUsername = databaseConnectionRequiresUsername;\nexports.databaseUsernameStyle = databaseUsernameStyle;\nexports.databaseLogInWithEmail = databaseLogInWithEmail;\nexports.databaseUsernameValue = databaseUsernameValue;\nexports.authWithUsername = authWithUsername;\nexports.hasScreen = hasScreen;\nexports.shouldAutoLogin = shouldAutoLogin;\nexports.passwordStrengthPolicy = passwordStrengthPolicy;\nexports.additionalSignUpFields = additionalSignUpFields;\nexports.showTerms = showTerms;\nexports.signUpFieldsStrictValidation = signUpFieldsStrictValidation;\nexports.signUpHideUsernameField = signUpHideUsernameField;\nexports.mustAcceptTerms = mustAcceptTerms;\nexports.termsAccepted = termsAccepted;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.resolveAdditionalSignUpFields = resolveAdditionalSignUpFields;\nvar _immutable = require('immutable');\nvar _immutable2 = _interopRequireDefault(_immutable);\nvar _index = require('../../core/index');\nvar l = _interopRequireWildcard(_index);\nvar _index2 = require('../../field/index');\nvar _data_utils = require('../../utils/data_utils');\nvar _sync = require('../../sync');\nvar _sync2 = _interopRequireDefault(_sync);\nvar _trim = require('trim');\nvar _trim2 = _interopRequireDefault(_trim);\nvar _tenant = require('../../core/tenant');\nvar _enterprise = require('../../connection/enterprise');\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar _dataFns = (0, _data_utils.dataFns)(['database']),\n  get = _dataFns.get,\n  initNS = _dataFns.initNS,\n  tget = _dataFns.tget,\n  tset = _dataFns.tset;\nfunction initDatabase(m, options) {\n  m = initNS(m, _immutable2.default.fromJS(processDatabaseOptions(options)));\n  m = resolveAdditionalSignUpFields(m);\n  return m;\n}\nfunction assertMaybeBoolean(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'boolean';\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a boolean.');\n  return valid;\n}\nfunction assertMaybeEnum(opts, name, a) {\n  var valid = opts[name] === undefined || a.indexOf(opts[name]) > -1;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not one of the following allowed values: ' + a.map(function (x) {\n    return JSON.stringify(x);\n  }).join(', ') + '.');\n  return valid;\n}\nfunction assertMaybeString(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'string' && (0, _trim2.default)(opts[name]).length > 0;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a non-empty string.');\n  return valid;\n}\nfunction assertMaybeArray(opts, name) {\n  var valid = opts[name] === undefined || window.Array.isArray(opts[name]);\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not an array.');\n  return valid;\n}\nfunction processDatabaseOptions(opts) {\n  var additionalSignUpFields = opts.additionalSignUpFields,\n    defaultDatabaseConnection = opts.defaultDatabaseConnection,\n    forgotPasswordLink = opts.forgotPasswordLink,\n    loginAfterSignUp = opts.loginAfterSignUp,\n    mustAcceptTerms = opts.mustAcceptTerms,\n    showTerms = opts.showTerms,\n    signUpLink = opts.signUpLink,\n    usernameStyle = opts.usernameStyle,\n    signUpFieldsStrictValidation = opts.signUpFieldsStrictValidation,\n    signUpHideUsernameField = opts.signUpHideUsernameField;\n  var _processScreenOptions = processScreenOptions(opts),\n    initialScreen = _processScreenOptions.initialScreen,\n    screens = _processScreenOptions.screens;\n  if (!assertMaybeEnum(opts, 'usernameStyle', ['email', 'username'])) {\n    usernameStyle = undefined;\n  }\n  if (!assertMaybeString(opts, 'defaultDatabaseConnection')) {\n    defaultDatabaseConnection = undefined;\n  }\n  if (!assertMaybeString(opts, 'forgotPasswordLink')) {\n    forgotPasswordLink = undefined;\n  }\n  if (!assertMaybeString(opts, 'signUpLink')) {\n    signUpLink = undefined;\n  }\n  if (!assertMaybeBoolean(opts, 'mustAcceptTerms')) {\n    mustAcceptTerms = undefined;\n  }\n  if (!assertMaybeBoolean(opts, 'showTerms')) {\n    showTerms = true;\n  }\n  if (!assertMaybeBoolean(opts, 'signUpFieldsStrictValidation')) {\n    signUpFieldsStrictValidation = false;\n  }\n  if (!assertMaybeBoolean(opts, 'signUpHideUsernameField')) {\n    signUpHideUsernameField = false;\n  }\n  if (!assertMaybeArray(opts, 'additionalSignUpFields')) {\n    additionalSignUpFields = undefined;\n  } else if (additionalSignUpFields) {\n    additionalSignUpFields = additionalSignUpFields.reduce(function (r, x) {\n      var icon = x.icon,\n        name = x.name,\n        options = x.options,\n        placeholder = x.placeholder,\n        placeholderHTML = x.placeholderHTML,\n        prefill = x.prefill,\n        type = x.type,\n        validator = x.validator,\n        value = x.value,\n        storage = x.storage;\n      var filter = true;\n      var reservedNames = ['email', 'username', 'password'];\n      if (typeof name != 'string' || !name.match(/^[a-zA-Z0-9_]+$/) || reservedNames.indexOf(name) > -1) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` because it does not contain valid `name` property. Every element of `additionalSignUpFields` must be an object with a `name` property that is a non-empty string consisting of letters, numbers and underscores. The following names are reserved, and therefore, cannot be used: ' + reservedNames.join(', ') + '.');\n        filter = false;\n      }\n      if (type !== 'hidden' && (typeof placeholder != 'string' || !placeholder) && (typeof placeholderHTML != 'string' || !placeholderHTML)) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it does not contain a valid `placeholder` or `placeholderHTML` property. Every element of `additionalSignUpFields` must have a `placeholder` or `placeholderHTML` property that is a non-empty string.');\n        filter = false;\n      }\n      if (placeholderHTML && placeholder) {\n        l.warn(opts, 'When provided, the `placeholderHTML` property of an element of `additionalSignUpFields` will override the `placeholder` property of that element');\n      }\n      if (icon != undefined && (typeof icon != 'string' || !icon)) {\n        l.warn(opts, 'When provided, the `icon` property of an element of `additionalSignUpFields` must be a non-empty string.');\n        icon = undefined;\n      }\n      if (prefill != undefined && (typeof prefill != 'string' || !prefill) && typeof prefill != 'function') {\n        l.warn(opts, 'When provided, the `prefill` property of an element of `additionalSignUpFields` must be a non-empty string or a function.');\n        prefill = undefined;\n      }\n      var types = ['select', 'text', 'checkbox', 'hidden'];\n      if (type != undefined && (typeof type != 'string' || types.indexOf(type) === -1)) {\n        l.warn(opts, 'When provided, the `type` property of an element of `additionalSignUpFields` must be one of the following strings: \"' + types.join('\", \"') + '\".');\n        type = undefined;\n      }\n      if (validator != undefined && type === 'select') {\n        l.warn(opts, 'Elements of `additionalSignUpFields` with a \"select\" `type` cannot specify a `validator` function, all of its `options` are assumed to be valid.');\n        validator = undefined;\n      }\n      if (validator != undefined && typeof validator != 'function') {\n        l.warn(opts, 'When provided, the `validator` property of an element of `additionalSignUpFields` must be a function.');\n        validator = undefined;\n      }\n      if (options != undefined && type != 'select') {\n        l.warn(opts, 'The `options` property can only by provided for an element of `additionalSignUpFields` when its `type` equals to \"select\"');\n        options = undefined;\n      }\n      if (options != undefined && !window.Array.isArray(options) && typeof options != 'function' || type === 'select' && options === undefined) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"select\" `type` but does not specify an `options` property that is an Array or a function.');\n        filter = false;\n      }\n      if (type === 'hidden' && !value) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"hidden\" `type` but does not specify a `value` string.');\n        filter = false;\n      }\n      return filter ? r.concat([{\n        icon: icon,\n        name: name,\n        options: options,\n        placeholder: placeholder,\n        placeholderHTML: placeholderHTML,\n        prefill: prefill,\n        type: type,\n        validator: validator,\n        value: value,\n        storage: storage\n      }]) : r;\n    }, []);\n    additionalSignUpFields = _immutable2.default.fromJS(additionalSignUpFields).map(function (x) {\n      return x.filter(function (y) {\n        return y !== undefined;\n      });\n    });\n  }\n\n  // TODO: add a warning if it is not a boolean, leave it undefined,\n  // and change accessor fn.\n  loginAfterSignUp = loginAfterSignUp === false ? false : true;\n  return (0, _immutable.Map)({\n    additionalSignUpFields: additionalSignUpFields,\n    defaultConnectionName: defaultDatabaseConnection,\n    forgotPasswordLink: forgotPasswordLink,\n    initialScreen: initialScreen,\n    loginAfterSignUp: loginAfterSignUp,\n    mustAcceptTerms: mustAcceptTerms,\n    showTerms: showTerms,\n    screens: screens,\n    signUpLink: signUpLink,\n    usernameStyle: usernameStyle,\n    signUpFieldsStrictValidation: signUpFieldsStrictValidation,\n    signUpHideUsernameField: signUpHideUsernameField\n  }).filter(function (x) {\n    return typeof x !== 'undefined';\n  }).toJS();\n}\nfunction processScreenOptions(opts) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    allowLogin: true,\n    allowSignUp: true,\n    allowForgotPassword: true,\n    initialScreen: undefined\n  };\n  var allowForgotPassword = opts.allowForgotPassword,\n    allowLogin = opts.allowLogin,\n    allowSignUp = opts.allowSignUp,\n    initialScreen = opts.initialScreen;\n  var screens = [];\n  if (allowLogin === true || !assertMaybeBoolean(opts, 'allowLogin') && defaults.allowLogin || allowLogin === undefined && defaults.allowLogin) {\n    screens.push('login');\n  }\n  if (allowSignUp === true || !assertMaybeBoolean(opts, 'allowSignUp') && defaults.allowSignUp || allowSignUp === undefined && defaults.allowSignUp) {\n    screens.push('signUp');\n  }\n  if (allowForgotPassword === true || !assertMaybeBoolean(opts, 'allowForgotPassword') && defaults.allowForgotPassword || allowForgotPassword === undefined && defaults.allowForgotPassword) {\n    screens.push('forgotPassword');\n  }\n  screens.push('mfaLogin');\n  if (!assertMaybeEnum(opts, 'initialScreen', screens)) {\n    initialScreen = undefined;\n  }\n  if (initialScreen === undefined) {\n    initialScreen = defaults.initialScreen || screens[0];\n  }\n  return {\n    initialScreen: initialScreen,\n    screens: new _immutable.List(screens)\n  };\n}\nfunction overrideDatabaseOptions(m, opts) {\n  var _processScreenOptions2 = processScreenOptions(opts, {\n      allowLogin: availableScreens(m).contains('login'),\n      allowSignUp: availableScreens(m).contains('signUp'),\n      allowForgotPassword: availableScreens(m).contains('forgotPassword'),\n      initialScreen: get(m, 'initialScreen')\n    }),\n    initialScreen = _processScreenOptions2.initialScreen,\n    screens = _processScreenOptions2.screens;\n  m = tset(m, 'initialScreen', initialScreen);\n  m = tset(m, 'screens', screens);\n  return m;\n}\nfunction defaultDatabaseConnection(m) {\n  var name = defaultDatabaseConnectionName(m);\n  return name && l.findConnection(m, name);\n}\nfunction defaultDatabaseConnectionName(m) {\n  return get(m, 'defaultConnectionName');\n}\nfunction databaseConnection(m) {\n  return l.resolvedConnection(m) || (0, _tenant.defaultDirectory)(m) || defaultDatabaseConnection(m) || l.connection(m, 'database');\n}\nfunction databaseConnectionName(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('name');\n}\nfunction forgotPasswordLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'forgotPasswordLink', notFound);\n}\nfunction signUpLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'signUpLink', notFound);\n}\nfunction setScreen(m, name) {\n  var fields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  // TODO: the lock/index module should provide a way to clear\n  // everything that needs the be cleared when changing screens, other\n  // modules should not care.\n  m = l.clearGlobalError(m);\n  m = l.clearGlobalSuccess(m);\n  m = (0, _index2.hideInvalidFields)(m, fields);\n  m = (0, _index2.clearFields)(m, fields);\n  return tset(m, 'screen', name);\n}\nfunction getScreen(m) {\n  var screen = tget(m, 'screen');\n  var initialScreen = getInitialScreen(m);\n  var screens = [screen, initialScreen, 'login', 'signUp', 'forgotPassword', 'mfaLogin'];\n  var availableScreens = screens.filter(function (x) {\n    return hasScreen(m, x);\n  });\n  return availableScreens[0];\n}\nfunction availableScreens(m) {\n  return tget(m, 'screens') || get(m, 'screens', new _immutable.List());\n}\nfunction getInitialScreen(m) {\n  return tget(m, 'initialScreen') || get(m, 'initialScreen');\n}\nfunction hasInitialScreen(m, str) {\n  return getInitialScreen(m) === str;\n}\nfunction databaseConnectionRequiresUsername(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).toJS().requireUsername;\n}\nfunction databaseUsernameStyle(m) {\n  if (l.hasSomeConnections(m, 'database')) {\n    if (l.connectionResolver(m)) {\n      return 'username';\n    }\n    return databaseConnectionRequiresUsername(m) ? get(m, 'usernameStyle', 'any') : 'email';\n  }\n  return l.hasSomeConnections(m, 'enterprise') && (0, _enterprise.findADConnectionWithoutDomain)(m) ? 'username' : 'email';\n}\nfunction databaseLogInWithEmail(m) {\n  return databaseUsernameStyle(m) === 'email';\n}\nfunction databaseUsernameValue(m) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isEmailOnly = databaseLogInWithEmail(m);\n  if (isEmailOnly) {\n    return (0, _index2.getFieldValue)(m, 'email');\n  }\n  if (options.emailFirst) {\n    return (0, _index2.getFieldValue)(m, 'email') || (0, _index2.getFieldValue)(m, 'username');\n  }\n  return (0, _index2.getFieldValue)(m, 'username') || (0, _index2.getFieldValue)(m, 'email');\n}\nfunction authWithUsername(m) {\n  return databaseConnectionRequiresUsername(m) || get(m, 'usernameStyle', 'email') === 'username';\n}\nfunction hasScreen(m, s) {\n  var _toJS = (databaseConnection(m) || (0, _immutable.Map)()).toJS(),\n    allowForgot = _toJS.allowForgot,\n    allowSignup = _toJS.allowSignup;\n  return !(allowForgot === false && s === 'forgotPassword') && !(allowSignup === false && s === 'signUp') && availableScreens(m).contains(s);\n}\nfunction shouldAutoLogin(m) {\n  return get(m, 'loginAfterSignUp');\n}\nfunction passwordStrengthPolicy(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('passwordPolicy', 'none');\n}\nfunction additionalSignUpFields(m) {\n  return get(m, 'additionalSignUpFields', (0, _immutable.List)());\n}\nfunction showTerms(m) {\n  return get(m, 'showTerms', true);\n}\nfunction signUpFieldsStrictValidation(m) {\n  return get(m, 'signUpFieldsStrictValidation', false);\n}\nfunction signUpHideUsernameField(m) {\n  return get(m, 'signUpHideUsernameField', false);\n}\nfunction mustAcceptTerms(m) {\n  return get(m, 'mustAcceptTerms', false);\n}\nfunction termsAccepted(m) {\n  return !mustAcceptTerms(m) || tget(m, 'termsAccepted', false);\n}\nfunction toggleTermsAcceptance(m) {\n  return tset(m, 'termsAccepted', !termsAccepted(m));\n}\nfunction resolveAdditionalSignUpFields(m) {\n  return additionalSignUpFields(m).reduce(function (r, x) {\n    switch (x.get('type')) {\n      case 'select':\n        return resolveAdditionalSignUpSelectField(r, x);\n      case 'hidden':\n        return resolveAdditionalSignUpHiddenField(r, x);\n      default:\n        return resolveAdditionalSignUpTextField(r, x);\n    }\n  }, m);\n}\nfunction resolveAdditionalSignUpSelectField(m, x) {\n  var name = x.get('name');\n  var keyNs = ['additionalSignUpField', name];\n  var prefill = x.get('prefill');\n  var options = x.get('options');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  var resolvedOptions = typeof options === 'function' ? undefined : options;\n  var register = function register(m) {\n    return resolvedPrefill !== undefined && resolvedOptions !== undefined ? (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill) : m;\n  };\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('prefill'), {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        resolvedPrefill = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  }\n  if (resolvedOptions === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('options'), {\n      successFn: function successFn(m, result) {\n        resolvedOptions = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return options(cb);\n      }\n    });\n  }\n  if (resolvedPrefill !== undefined && resolvedOptions !== undefined) {\n    m = (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill);\n  }\n  return m;\n}\nfunction resolveAdditionalSignUpTextField(m, x) {\n  var name = x.get('name');\n  var key = ['additionalSignUpField', name, 'prefill'];\n  var prefill = x.get('prefill');\n  var validator = x.get('validator');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, key, {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        return (0, _index2.setField)(m, name, result, validator);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  } else {\n    m = (0, _index2.setField)(m, name, resolvedPrefill, validator);\n  }\n  return m;\n}\nfunction resolveAdditionalSignUpHiddenField(m, x) {\n  return (0, _index2.setField)(m, x.get('name'), x.get('value'));\n}","map":{"version":3,"names":["exports","__esModule","initDatabase","overrideDatabaseOptions","defaultDatabaseConnection","defaultDatabaseConnectionName","databaseConnection","databaseConnectionName","forgotPasswordLink","signUpLink","setScreen","getScreen","availableScreens","getInitialScreen","hasInitialScreen","databaseConnectionRequiresUsername","databaseUsernameStyle","databaseLogInWithEmail","databaseUsernameValue","authWithUsername","hasScreen","shouldAutoLogin","passwordStrengthPolicy","additionalSignUpFields","showTerms","signUpFieldsStrictValidation","signUpHideUsernameField","mustAcceptTerms","termsAccepted","toggleTermsAcceptance","resolveAdditionalSignUpFields","_immutable","require","_immutable2","_interopRequireDefault","_index","l","_interopRequireWildcard","_index2","_data_utils","_sync","_sync2","_trim","_trim2","_tenant","_enterprise","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","_dataFns","dataFns","get","initNS","tget","tset","m","options","fromJS","processDatabaseOptions","assertMaybeBoolean","opts","name","valid","undefined","warn","assertMaybeEnum","a","indexOf","map","x","JSON","stringify","join","assertMaybeString","length","assertMaybeArray","window","Array","isArray","loginAfterSignUp","usernameStyle","_processScreenOptions","processScreenOptions","initialScreen","screens","reduce","r","icon","placeholder","placeholderHTML","prefill","type","validator","value","storage","filter","reservedNames","match","types","concat","y","Map","defaultConnectionName","toJS","defaults","arguments","allowLogin","allowSignUp","allowForgotPassword","push","List","_processScreenOptions2","contains","findConnection","resolvedConnection","defaultDirectory","connection","notFound","fields","clearGlobalError","clearGlobalSuccess","hideInvalidFields","clearFields","screen","str","requireUsername","hasSomeConnections","connectionResolver","findADConnectionWithoutDomain","isEmailOnly","getFieldValue","emailFirst","s","_toJS","allowForgot","allowSignup","resolveAdditionalSignUpSelectField","resolveAdditionalSignUpHiddenField","resolveAdditionalSignUpTextField","keyNs","resolvedPrefill","resolvedOptions","register","registerOptionField","recoverResult","successFn","result","syncFn","cb","setField"],"sources":["C:/Users/diskk/OneDrive/Desktop/New folder/Transport_modal/node_modules/auth0-lock/lib/connection/database/index.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.initDatabase = initDatabase;\nexports.overrideDatabaseOptions = overrideDatabaseOptions;\nexports.defaultDatabaseConnection = defaultDatabaseConnection;\nexports.defaultDatabaseConnectionName = defaultDatabaseConnectionName;\nexports.databaseConnection = databaseConnection;\nexports.databaseConnectionName = databaseConnectionName;\nexports.forgotPasswordLink = forgotPasswordLink;\nexports.signUpLink = signUpLink;\nexports.setScreen = setScreen;\nexports.getScreen = getScreen;\nexports.availableScreens = availableScreens;\nexports.getInitialScreen = getInitialScreen;\nexports.hasInitialScreen = hasInitialScreen;\nexports.databaseConnectionRequiresUsername = databaseConnectionRequiresUsername;\nexports.databaseUsernameStyle = databaseUsernameStyle;\nexports.databaseLogInWithEmail = databaseLogInWithEmail;\nexports.databaseUsernameValue = databaseUsernameValue;\nexports.authWithUsername = authWithUsername;\nexports.hasScreen = hasScreen;\nexports.shouldAutoLogin = shouldAutoLogin;\nexports.passwordStrengthPolicy = passwordStrengthPolicy;\nexports.additionalSignUpFields = additionalSignUpFields;\nexports.showTerms = showTerms;\nexports.signUpFieldsStrictValidation = signUpFieldsStrictValidation;\nexports.signUpHideUsernameField = signUpHideUsernameField;\nexports.mustAcceptTerms = mustAcceptTerms;\nexports.termsAccepted = termsAccepted;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.resolveAdditionalSignUpFields = resolveAdditionalSignUpFields;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _index = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nvar _index2 = require('../../field/index');\n\nvar _data_utils = require('../../utils/data_utils');\n\nvar _sync = require('../../sync');\n\nvar _sync2 = _interopRequireDefault(_sync);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _tenant = require('../../core/tenant');\n\nvar _enterprise = require('../../connection/enterprise');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dataFns = (0, _data_utils.dataFns)(['database']),\n    get = _dataFns.get,\n    initNS = _dataFns.initNS,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset;\n\nfunction initDatabase(m, options) {\n  m = initNS(m, _immutable2.default.fromJS(processDatabaseOptions(options)));\n  m = resolveAdditionalSignUpFields(m);\n  return m;\n}\n\nfunction assertMaybeBoolean(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'boolean';\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a boolean.');\n  return valid;\n}\n\nfunction assertMaybeEnum(opts, name, a) {\n  var valid = opts[name] === undefined || a.indexOf(opts[name]) > -1;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not one of the following allowed values: ' + a.map(function (x) {\n    return JSON.stringify(x);\n  }).join(', ') + '.');\n  return valid;\n}\n\nfunction assertMaybeString(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'string' && (0, _trim2.default)(opts[name]).length > 0;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a non-empty string.');\n  return valid;\n}\n\nfunction assertMaybeArray(opts, name) {\n  var valid = opts[name] === undefined || window.Array.isArray(opts[name]);\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not an array.');\n  return valid;\n}\n\nfunction processDatabaseOptions(opts) {\n  var additionalSignUpFields = opts.additionalSignUpFields,\n      defaultDatabaseConnection = opts.defaultDatabaseConnection,\n      forgotPasswordLink = opts.forgotPasswordLink,\n      loginAfterSignUp = opts.loginAfterSignUp,\n      mustAcceptTerms = opts.mustAcceptTerms,\n      showTerms = opts.showTerms,\n      signUpLink = opts.signUpLink,\n      usernameStyle = opts.usernameStyle,\n      signUpFieldsStrictValidation = opts.signUpFieldsStrictValidation,\n      signUpHideUsernameField = opts.signUpHideUsernameField;\n\n  var _processScreenOptions = processScreenOptions(opts),\n      initialScreen = _processScreenOptions.initialScreen,\n      screens = _processScreenOptions.screens;\n\n  if (!assertMaybeEnum(opts, 'usernameStyle', ['email', 'username'])) {\n    usernameStyle = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'defaultDatabaseConnection')) {\n    defaultDatabaseConnection = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'forgotPasswordLink')) {\n    forgotPasswordLink = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'signUpLink')) {\n    signUpLink = undefined;\n  }\n\n  if (!assertMaybeBoolean(opts, 'mustAcceptTerms')) {\n    mustAcceptTerms = undefined;\n  }\n\n  if (!assertMaybeBoolean(opts, 'showTerms')) {\n    showTerms = true;\n  }\n\n  if (!assertMaybeBoolean(opts, 'signUpFieldsStrictValidation')) {\n    signUpFieldsStrictValidation = false;\n  }\n\n  if (!assertMaybeBoolean(opts, 'signUpHideUsernameField')) {\n    signUpHideUsernameField = false;\n  }\n\n  if (!assertMaybeArray(opts, 'additionalSignUpFields')) {\n    additionalSignUpFields = undefined;\n  } else if (additionalSignUpFields) {\n    additionalSignUpFields = additionalSignUpFields.reduce(function (r, x) {\n      var icon = x.icon,\n          name = x.name,\n          options = x.options,\n          placeholder = x.placeholder,\n          placeholderHTML = x.placeholderHTML,\n          prefill = x.prefill,\n          type = x.type,\n          validator = x.validator,\n          value = x.value,\n          storage = x.storage;\n\n      var filter = true;\n\n      var reservedNames = ['email', 'username', 'password'];\n      if (typeof name != 'string' || !name.match(/^[a-zA-Z0-9_]+$/) || reservedNames.indexOf(name) > -1) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` because it does not contain valid `name` property. Every element of `additionalSignUpFields` must be an object with a `name` property that is a non-empty string consisting of letters, numbers and underscores. The following names are reserved, and therefore, cannot be used: ' + reservedNames.join(', ') + '.');\n        filter = false;\n      }\n\n      if (type !== 'hidden' && (typeof placeholder != 'string' || !placeholder) && (typeof placeholderHTML != 'string' || !placeholderHTML)) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it does not contain a valid `placeholder` or `placeholderHTML` property. Every element of `additionalSignUpFields` must have a `placeholder` or `placeholderHTML` property that is a non-empty string.');\n        filter = false;\n      }\n\n      if (placeholderHTML && placeholder) {\n        l.warn(opts, 'When provided, the `placeholderHTML` property of an element of `additionalSignUpFields` will override the `placeholder` property of that element');\n      }\n\n      if (icon != undefined && (typeof icon != 'string' || !icon)) {\n        l.warn(opts, 'When provided, the `icon` property of an element of `additionalSignUpFields` must be a non-empty string.');\n        icon = undefined;\n      }\n\n      if (prefill != undefined && (typeof prefill != 'string' || !prefill) && typeof prefill != 'function') {\n        l.warn(opts, 'When provided, the `prefill` property of an element of `additionalSignUpFields` must be a non-empty string or a function.');\n        prefill = undefined;\n      }\n\n      var types = ['select', 'text', 'checkbox', 'hidden'];\n      if (type != undefined && (typeof type != 'string' || types.indexOf(type) === -1)) {\n        l.warn(opts, 'When provided, the `type` property of an element of `additionalSignUpFields` must be one of the following strings: \"' + types.join('\", \"') + '\".');\n        type = undefined;\n      }\n\n      if (validator != undefined && type === 'select') {\n        l.warn(opts, 'Elements of `additionalSignUpFields` with a \"select\" `type` cannot specify a `validator` function, all of its `options` are assumed to be valid.');\n        validator = undefined;\n      }\n\n      if (validator != undefined && typeof validator != 'function') {\n        l.warn(opts, 'When provided, the `validator` property of an element of `additionalSignUpFields` must be a function.');\n        validator = undefined;\n      }\n\n      if (options != undefined && type != 'select') {\n        l.warn(opts, 'The `options` property can only by provided for an element of `additionalSignUpFields` when its `type` equals to \"select\"');\n        options = undefined;\n      }\n\n      if (options != undefined && !window.Array.isArray(options) && typeof options != 'function' || type === 'select' && options === undefined) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"select\" `type` but does not specify an `options` property that is an Array or a function.');\n        filter = false;\n      }\n      if (type === 'hidden' && !value) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"hidden\" `type` but does not specify a `value` string.');\n        filter = false;\n      }\n\n      return filter ? r.concat([{\n        icon: icon,\n        name: name,\n        options: options,\n        placeholder: placeholder,\n        placeholderHTML: placeholderHTML,\n        prefill: prefill,\n        type: type,\n        validator: validator,\n        value: value,\n        storage: storage\n      }]) : r;\n    }, []);\n\n    additionalSignUpFields = _immutable2.default.fromJS(additionalSignUpFields).map(function (x) {\n      return x.filter(function (y) {\n        return y !== undefined;\n      });\n    });\n  }\n\n  // TODO: add a warning if it is not a boolean, leave it undefined,\n  // and change accessor fn.\n  loginAfterSignUp = loginAfterSignUp === false ? false : true;\n\n  return (0, _immutable.Map)({\n    additionalSignUpFields: additionalSignUpFields,\n    defaultConnectionName: defaultDatabaseConnection,\n    forgotPasswordLink: forgotPasswordLink,\n    initialScreen: initialScreen,\n    loginAfterSignUp: loginAfterSignUp,\n    mustAcceptTerms: mustAcceptTerms,\n    showTerms: showTerms,\n    screens: screens,\n    signUpLink: signUpLink,\n    usernameStyle: usernameStyle,\n    signUpFieldsStrictValidation: signUpFieldsStrictValidation,\n    signUpHideUsernameField: signUpHideUsernameField\n  }).filter(function (x) {\n    return typeof x !== 'undefined';\n  }).toJS();\n}\n\nfunction processScreenOptions(opts) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    allowLogin: true,\n    allowSignUp: true,\n    allowForgotPassword: true,\n    initialScreen: undefined\n  };\n  var allowForgotPassword = opts.allowForgotPassword,\n      allowLogin = opts.allowLogin,\n      allowSignUp = opts.allowSignUp,\n      initialScreen = opts.initialScreen;\n\n\n  var screens = [];\n\n  if (allowLogin === true || !assertMaybeBoolean(opts, 'allowLogin') && defaults.allowLogin || allowLogin === undefined && defaults.allowLogin) {\n    screens.push('login');\n  }\n\n  if (allowSignUp === true || !assertMaybeBoolean(opts, 'allowSignUp') && defaults.allowSignUp || allowSignUp === undefined && defaults.allowSignUp) {\n    screens.push('signUp');\n  }\n\n  if (allowForgotPassword === true || !assertMaybeBoolean(opts, 'allowForgotPassword') && defaults.allowForgotPassword || allowForgotPassword === undefined && defaults.allowForgotPassword) {\n    screens.push('forgotPassword');\n  }\n\n  screens.push('mfaLogin');\n\n  if (!assertMaybeEnum(opts, 'initialScreen', screens)) {\n    initialScreen = undefined;\n  }\n\n  if (initialScreen === undefined) {\n    initialScreen = defaults.initialScreen || screens[0];\n  }\n\n  return { initialScreen: initialScreen, screens: new _immutable.List(screens) };\n}\n\nfunction overrideDatabaseOptions(m, opts) {\n  var _processScreenOptions2 = processScreenOptions(opts, {\n    allowLogin: availableScreens(m).contains('login'),\n    allowSignUp: availableScreens(m).contains('signUp'),\n    allowForgotPassword: availableScreens(m).contains('forgotPassword'),\n    initialScreen: get(m, 'initialScreen')\n  }),\n      initialScreen = _processScreenOptions2.initialScreen,\n      screens = _processScreenOptions2.screens;\n\n  m = tset(m, 'initialScreen', initialScreen);\n  m = tset(m, 'screens', screens);\n  return m;\n}\n\nfunction defaultDatabaseConnection(m) {\n  var name = defaultDatabaseConnectionName(m);\n  return name && l.findConnection(m, name);\n}\n\nfunction defaultDatabaseConnectionName(m) {\n  return get(m, 'defaultConnectionName');\n}\n\nfunction databaseConnection(m) {\n  return l.resolvedConnection(m) || (0, _tenant.defaultDirectory)(m) || defaultDatabaseConnection(m) || l.connection(m, 'database');\n}\n\nfunction databaseConnectionName(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('name');\n}\n\nfunction forgotPasswordLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  return get(m, 'forgotPasswordLink', notFound);\n}\n\nfunction signUpLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  return get(m, 'signUpLink', notFound);\n}\n\nfunction setScreen(m, name) {\n  var fields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  // TODO: the lock/index module should provide a way to clear\n  // everything that needs the be cleared when changing screens, other\n  // modules should not care.\n  m = l.clearGlobalError(m);\n  m = l.clearGlobalSuccess(m);\n  m = (0, _index2.hideInvalidFields)(m, fields);\n  m = (0, _index2.clearFields)(m, fields);\n\n  return tset(m, 'screen', name);\n}\n\nfunction getScreen(m) {\n  var screen = tget(m, 'screen');\n  var initialScreen = getInitialScreen(m);\n  var screens = [screen, initialScreen, 'login', 'signUp', 'forgotPassword', 'mfaLogin'];\n  var availableScreens = screens.filter(function (x) {\n    return hasScreen(m, x);\n  });\n  return availableScreens[0];\n}\n\nfunction availableScreens(m) {\n  return tget(m, 'screens') || get(m, 'screens', new _immutable.List());\n}\n\nfunction getInitialScreen(m) {\n  return tget(m, 'initialScreen') || get(m, 'initialScreen');\n}\n\nfunction hasInitialScreen(m, str) {\n  return getInitialScreen(m) === str;\n}\n\nfunction databaseConnectionRequiresUsername(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).toJS().requireUsername;\n}\n\nfunction databaseUsernameStyle(m) {\n  if (l.hasSomeConnections(m, 'database')) {\n    if (l.connectionResolver(m)) {\n      return 'username';\n    }\n\n    return databaseConnectionRequiresUsername(m) ? get(m, 'usernameStyle', 'any') : 'email';\n  }\n\n  return l.hasSomeConnections(m, 'enterprise') && (0, _enterprise.findADConnectionWithoutDomain)(m) ? 'username' : 'email';\n}\n\nfunction databaseLogInWithEmail(m) {\n  return databaseUsernameStyle(m) === 'email';\n}\n\nfunction databaseUsernameValue(m) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var isEmailOnly = databaseLogInWithEmail(m);\n  if (isEmailOnly) {\n    return (0, _index2.getFieldValue)(m, 'email');\n  }\n  if (options.emailFirst) {\n    return (0, _index2.getFieldValue)(m, 'email') || (0, _index2.getFieldValue)(m, 'username');\n  }\n  return (0, _index2.getFieldValue)(m, 'username') || (0, _index2.getFieldValue)(m, 'email');\n}\n\nfunction authWithUsername(m) {\n  return databaseConnectionRequiresUsername(m) || get(m, 'usernameStyle', 'email') === 'username';\n}\n\nfunction hasScreen(m, s) {\n  var _toJS = (databaseConnection(m) || (0, _immutable.Map)()).toJS(),\n      allowForgot = _toJS.allowForgot,\n      allowSignup = _toJS.allowSignup;\n\n  return !(allowForgot === false && s === 'forgotPassword') && !(allowSignup === false && s === 'signUp') && availableScreens(m).contains(s);\n}\n\nfunction shouldAutoLogin(m) {\n  return get(m, 'loginAfterSignUp');\n}\n\nfunction passwordStrengthPolicy(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('passwordPolicy', 'none');\n}\n\nfunction additionalSignUpFields(m) {\n  return get(m, 'additionalSignUpFields', (0, _immutable.List)());\n}\n\nfunction showTerms(m) {\n  return get(m, 'showTerms', true);\n}\n\nfunction signUpFieldsStrictValidation(m) {\n  return get(m, 'signUpFieldsStrictValidation', false);\n}\n\nfunction signUpHideUsernameField(m) {\n  return get(m, 'signUpHideUsernameField', false);\n}\n\nfunction mustAcceptTerms(m) {\n  return get(m, 'mustAcceptTerms', false);\n}\n\nfunction termsAccepted(m) {\n  return !mustAcceptTerms(m) || tget(m, 'termsAccepted', false);\n}\n\nfunction toggleTermsAcceptance(m) {\n  return tset(m, 'termsAccepted', !termsAccepted(m));\n}\n\nfunction resolveAdditionalSignUpFields(m) {\n  return additionalSignUpFields(m).reduce(function (r, x) {\n    switch (x.get('type')) {\n      case 'select':\n        return resolveAdditionalSignUpSelectField(r, x);\n      case 'hidden':\n        return resolveAdditionalSignUpHiddenField(r, x);\n      default:\n        return resolveAdditionalSignUpTextField(r, x);\n    }\n  }, m);\n}\n\nfunction resolveAdditionalSignUpSelectField(m, x) {\n  var name = x.get('name');\n  var keyNs = ['additionalSignUpField', name];\n  var prefill = x.get('prefill');\n  var options = x.get('options');\n\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  var resolvedOptions = typeof options === 'function' ? undefined : options;\n\n  var register = function register(m) {\n    return resolvedPrefill !== undefined && resolvedOptions !== undefined ? (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill) : m;\n  };\n\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('prefill'), {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        resolvedPrefill = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  }\n\n  if (resolvedOptions === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('options'), {\n      successFn: function successFn(m, result) {\n        resolvedOptions = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return options(cb);\n      }\n    });\n  }\n\n  if (resolvedPrefill !== undefined && resolvedOptions !== undefined) {\n    m = (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill);\n  }\n\n  return m;\n}\n\nfunction resolveAdditionalSignUpTextField(m, x) {\n  var name = x.get('name');\n  var key = ['additionalSignUpField', name, 'prefill'];\n  var prefill = x.get('prefill');\n  var validator = x.get('validator');\n\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, key, {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        return (0, _index2.setField)(m, name, result, validator);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  } else {\n    m = (0, _index2.setField)(m, name, resolvedPrefill, validator);\n  }\n\n  return m;\n}\n\nfunction resolveAdditionalSignUpHiddenField(m, x) {\n  return (0, _index2.setField)(m, x.get('name'), x.get('value'));\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}